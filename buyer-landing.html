<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<title>Whistle AI — 한국 트렌드 제품 소싱 | 지금 한국에서 유행하는 제품</title>
<meta name="description" content="한국 소비자들이 실제 구매하는 트렌드 제품을 검색하세요. AI 원산지 검증. 네이버 쇼핑 5천만+ 실시간 데이터.">
<meta name="keywords" content="한국트렌드제품,K-Beauty,한국유행상품,한국소싱,OEM,ODM,한국공장,Whistle AI,화장품수출,식품수출">
<meta name="author" content="MOTIVE Innovation">
<meta name="robots" content="index, follow">
<meta name="theme-color" content="#060B18">
<meta property="og:type" content="website">
<meta property="og:title" content="Whistle AI — 한국 트렌드 제품 소싱">
<meta property="og:description" content="한국에서 지금 유행하는 제품을 찾아보세요. 5천만+ 실시간 데이터. AI 원산지 검증.">
<meta property="og:site_name" content="Whistle AI">
<meta property="og:locale" content="ko_KR">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}body{background:#060B18;overflow-x:hidden}
@media(max-width:768px){
  .hero-heading{font-size:28px!important}
  .hero-sub{font-size:14px!important}
  .section-heading{font-size:28px!important}
  .nav-desktop{display:none!important}
  .mobile-cta{display:flex!important}
  .grid-responsive{grid-template-columns:1fr!important}
  .grid-2-responsive{grid-template-columns:1fr!important}
  .footer-flex{flex-direction:column!important;text-align:center!important}
  .footer-links{justify-content:center!important}
  .compare-grid{grid-template-columns:1fr!important}
  .service-grid{grid-template-columns:1fr!important}
}
@media(max-width:480px){
  .hero-heading{font-size:24px!important}
  .section-padding{padding:60px 16px!important}
}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;

const T = {
  bg: "#060B18", bgCard: "#0D1424", bgSurface: "#111B2E",
  navy: "#0A1628", deep: "#070E1B",
  pri: "#00D4FF", priG: "linear-gradient(135deg,#00D4FF,#0088FF)",
  acc: "#FFB800", accG: "linear-gradient(135deg,#FFB800,#FF8C00)",
  ok: "#00E676", err: "#FF5252",
  purple: "#A855F7", purpleG: "linear-gradient(135deg,#A855F7,#6D28D9)",
  w: "#FFFFFF", w90: "rgba(255,255,255,.9)", w60: "rgba(255,255,255,.6)",
  w40: "rgba(255,255,255,.4)", w20: "rgba(255,255,255,.2)", w08: "rgba(255,255,255,.06)",
  w12: "rgba(255,255,255,.1)",
  border: "rgba(255,255,255,.08)", borderL: "rgba(255,255,255,.15)",
  glow: "0 0 40px rgba(0,212,255,.15)", glowAcc: "0 0 40px rgba(255,184,0,.12)",
  card: "0 4px 24px rgba(0,0,0,.4)",
};

const useInView = (th = 0.1) => {
  const ref = useRef(null);
  const [v, setV] = useState(false);
  useEffect(() => { const el = ref.current; if (!el) return; const o = new IntersectionObserver(([e]) => { if (e.isIntersecting) setV(true); }, { threshold: th }); o.observe(el); return () => o.disconnect(); }, [th]);
  return [ref, v];
};
const Fade = ({ children, delay = 0, style = {} }) => { const [ref, v] = useInView(); return <div ref={ref} style={{ ...style, opacity: v ? 1 : 0, transform: v ? "translateY(0)" : "translateY(28px)", transition: `all .8s cubic-bezier(.16,1,.3,1) ${delay}s` }}>{children}</div>; };
const GlowLine = () => <div style={{ height: 1, background: `linear-gradient(90deg, transparent, ${T.pri}40, transparent)`, margin: "0 auto", maxWidth: 600 }} />;

/* ═══ MOTION DEMO COMPONENT ═══ */
function DemoMotion({ openSignup }) {
  const [step, setStep] = useState(0);
  const [typing, setTyping] = useState("");
  const totalSteps = 7;
  const fullText = "달팽이크림";

  useEffect(() => {
    let timer;
    let charIdx = 0;
    const delays = [2000, 150, 150, 150, 150, 150, 1200, 2000, 2200, 2200, 2200, 3000];

    const run = (s) => {
      if (s === 0) { setStep(0); setTyping(""); charIdx = 0; timer = setTimeout(() => run(1), delays[0]); }
      else if (s >= 1 && s <= 5) { charIdx = s; setTyping(fullText.slice(0, charIdx)); timer = setTimeout(() => run(s + 1), delays[s]); }
      else if (s === 6) { setStep(1); timer = setTimeout(() => run(7), delays[6]); } // click search
      else if (s === 7) { setStep(2); timer = setTimeout(() => run(8), delays[7]); } // loading
      else if (s === 8) { setStep(3); timer = setTimeout(() => run(9), delays[8]); } // results
      else if (s === 9) { setStep(4); timer = setTimeout(() => run(10), delays[9]); } // origin verify
      else if (s === 10) { setStep(5); timer = setTimeout(() => run(11), delays[10]); } // inquiry
      else if (s === 11) { setStep(6); timer = setTimeout(() => run(0), delays[11]); } // connected → loop
    };

    run(0);
    return () => clearTimeout(timer);
  }, []);

  const mockProducts = [
    { name: "로얄 블랙 스네일 크림 50ml", price: "12,480", maker: "한국콜마", badge: "verified" },
    { name: "스네일 뮤신 에센스 96%", price: "8,900", maker: "코스알엑스", badge: "verified" },
    { name: "달팽이 수분크림 100ml", price: "15,200", maker: "", badge: "likely_korean" },
  ];

  const badgeStyle = (type) => ({
    display: "inline-flex", alignItems: "center", gap: 3, padding: "2px 6px", borderRadius: 4, fontSize: 9, fontWeight: 700,
    ...(type === "verified" ? { background: "rgba(0,230,118,.12)", color: "#00E676" } : { background: "rgba(255,184,0,.12)", color: "#FFB800" })
  });

  const screenBg = { background: T.bgCard, borderRadius: 12, border: `1px solid ${T.border}`, padding: 16, position: "relative", overflow: "hidden" };

  return (
    <Fade delay={0.1}>
      <div style={{ maxWidth: 720, margin: "32px auto 0", padding: "0 24px" }}>
        <div style={{ textAlign: "center", marginBottom: 16 }}>
          <span style={{ display: "inline-block", padding: "4px 12px", borderRadius: 8, fontSize: 12, fontWeight: 600, background: `${T.purple}12`, color: T.purple, border: `1px solid ${T.purple}25` }}>30초 데모</span>
          <div style={{ fontSize: 16, fontWeight: 700, color: T.w, marginTop: 8 }}>이렇게 검색하고 소싱합니다</div>
        </div>

        <div style={{ ...screenBg, minHeight: 320 }}>
          {/* Step indicator */}
          <div style={{ display: "flex", gap: 6, marginBottom: 16, justifyContent: "center" }}>
            {["검색", "분석", "결과", "검증", "문의", "연결"].map((label, i) => (
              <div key={i} style={{ display: "flex", alignItems: "center", gap: 4 }}>
                <div style={{ width: 20, height: 20, borderRadius: 10, background: step >= i + 1 ? T.pri : T.w08, border: `1.5px solid ${step >= i + 1 ? T.pri : T.border}`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 9, fontWeight: 700, color: step >= i + 1 ? T.bg : T.w40, transition: "all .4s" }}>
                  {step >= i + 1 ? "✓" : i + 1}
                </div>
                <span style={{ fontSize: 10, color: step >= i + 1 ? T.pri : T.w40, fontWeight: 600, transition: "color .4s" }}>{label}</span>
                {i < 5 && <div style={{ width: 12, height: 1, background: step >= i + 2 ? T.pri : T.border, transition: "background .4s" }} />}
              </div>
            ))}
          </div>

          {/* Step 0: Search bar with typing */}
          <div style={{ opacity: step <= 1 ? 1 : 0, height: step <= 1 ? "auto" : 0, overflow: "hidden", transition: "opacity .5s" }}>
            <div style={{ display: "flex", gap: 8, marginBottom: 12 }}>
              <div style={{ flex: 1, padding: "10px 14px", borderRadius: 10, background: T.bgSurface, border: `1px solid ${step === 1 ? T.pri : T.border}`, transition: "border .3s" }}>
                <span style={{ fontSize: 13, color: typing ? T.w90 : T.w40, fontFamily: "'Noto Sans KR',sans-serif" }}>
                  {typing || "한국에서 유행하는 제품을 검색하세요..."}
                  {step === 0 && <span style={{ animation: "blink 1s infinite", color: T.pri }}>|</span>}
                </span>
              </div>
              <div style={{ padding: "10px 18px", borderRadius: 10, background: step === 1 ? T.priG : `${T.pri}15`, color: step === 1 ? T.bg : T.pri, fontSize: 13, fontWeight: 700, display: "flex", alignItems: "center", transition: "all .3s", transform: step === 1 ? "scale(0.95)" : "scale(1)" }}>검색하기</div>
            </div>
            <div style={{ display: "flex", gap: 6, flexWrap: "wrap" }}>
              {["달팽이크림", "시트마스크", "홍삼", "선크림"].map((kw, i) => (
                <span key={i} style={{ padding: "4px 10px", borderRadius: 14, fontSize: 11, fontWeight: 600, background: kw === "달팽이크림" && step >= 1 ? `${T.pri}20` : `${T.pri}06`, color: T.pri, border: `1px solid ${kw === "달팽이크림" && step >= 1 ? T.pri : `${T.pri}20`}`, transition: "all .3s" }}>{kw}</span>
              ))}
            </div>
          </div>

          {/* Step 2: Loading */}
          <div style={{ opacity: step === 2 ? 1 : 0, height: step === 2 ? "auto" : 0, overflow: "hidden", transition: "opacity .5s", textAlign: "center", padding: step === 2 ? "40px 0" : 0 }}>
            <div style={{ width: 32, height: 32, border: `3px solid ${T.border}`, borderTopColor: T.pri, borderRadius: "50%", margin: "0 auto 12px", animation: "spin 1s linear infinite" }} />
            <div style={{ fontSize: 13, color: T.w40 }}>5천만+ 한국 내수 상품에서 검색 중...</div>
            <div style={{ fontSize: 11, color: T.pri, marginTop: 4 }}>AI 원산지 검증 진행 중</div>
          </div>

          {/* Step 3-4: Results + Verification */}
          <div style={{ opacity: step >= 3 && step <= 5 ? 1 : 0, height: step >= 3 && step <= 5 ? "auto" : 0, overflow: "hidden", transition: "opacity .5s" }}>
            <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", marginBottom: 10 }}>
              <span style={{ fontSize: 12, color: T.w40 }}>검색 결과 <span style={{ color: T.pri, fontWeight: 700 }}>42,310</span>건</span>
              <span style={{ fontSize: 11, color: T.ok, fontWeight: 600 }}>&#x2705; AI 검증 완료</span>
            </div>
            <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
              {mockProducts.map((p, i) => (
                <div key={i} style={{ display: "flex", alignItems: "center", gap: 12, padding: "10px 12px", borderRadius: 10, background: T.bgSurface, border: `1px solid ${step === 5 && i === 0 ? T.pri : T.border}`, transition: "all .4s", transform: step >= 3 ? "translateX(0)" : "translateX(20px)", opacity: step >= 3 ? 1 : 0, transitionDelay: `${i * 0.15}s` }}>
                  <div style={{ width: 48, height: 48, borderRadius: 8, background: `linear-gradient(135deg, ${T.pri}10, ${T.acc}10)`, flexShrink: 0, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 22 }}>&#x1F9F4;</div>
                  <div style={{ flex: 1, minWidth: 0 }}>
                    <div style={{ fontSize: 12, fontWeight: 600, color: T.w90, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{p.name}</div>
                    <div style={{ display: "flex", gap: 4, marginTop: 3, alignItems: "center" }}>
                      <span style={{ fontSize: 13, fontWeight: 800, color: T.acc }}>{p.price}원 <span style={{ fontSize: 9, fontWeight: 500, color: T.w40 }}>(한국 판매가)</span></span>
                      {p.maker && <span style={{ fontSize: 10, color: T.w40 }}>| {p.maker}</span>}
                    </div>
                  </div>
                  <div style={{ flexShrink: 0 }}>
                    {/* Origin badge animation */}
                    <div style={{ ...badgeStyle(p.badge), transform: step >= 4 ? "scale(1)" : "scale(0.8)", opacity: step >= 4 ? 1 : 0.3, transition: "all .4s", transitionDelay: `${i * 0.2}s` }}>
                      {p.badge === "verified" ? "✅ 한국 제조 확인" : "⚠️ 한국 브랜드"}
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {/* Step 5: Inquiry */}
            {step === 5 && (
              <div style={{ marginTop: 12, padding: "12px 16px", borderRadius: 10, background: `${T.pri}08`, border: `1px solid ${T.pri}25`, display: "flex", alignItems: "center", gap: 10, animation: "fadeIn .5s" }}>
                <div style={{ width: 32, height: 32, borderRadius: 8, background: T.priG, display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke={T.bg} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"/></svg>
                </div>
                <div>
                  <div style={{ fontSize: 12, fontWeight: 700, color: T.pri }}>인콰이어리 제출 완료</div>
                  <div style={{ fontSize: 10, color: T.w40 }}>한국 현지팀이 제조사 '한국콜마'에 연결 중...</div>
                </div>
              </div>
            )}
          </div>

          {/* Step 6: Connected */}
          <div style={{ opacity: step === 6 ? 1 : 0, height: step === 6 ? "auto" : 0, overflow: "hidden", transition: "opacity .5s", textAlign: "center", padding: step === 6 ? "32px 0" : 0 }}>
            <div style={{ width: 56, height: 56, borderRadius: 28, background: `${T.ok}12`, border: `2px solid ${T.ok}40`, display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 12px", fontSize: 26 }}>&#x1F91D;</div>
            <div style={{ fontSize: 16, fontWeight: 800, color: T.w, marginBottom: 4 }}>제조사 연결 완료!</div>
            <div style={{ fontSize: 12, color: T.w40, marginBottom: 4 }}>바이어 ↔ 한국콜마 (달팽이크림 제조사)</div>
            <div style={{ fontSize: 11, color: T.ok }}>샘플 발송 → MOQ 협상 → 수출 진행</div>
            <button onClick={openSignup} style={{ marginTop: 16, display: "inline-flex", alignItems: "center", justifyContent: "center", gap: 6, padding: "10px 24px", borderRadius: 10, background: T.priG, color: T.bg, fontSize: 13, fontWeight: 700, border: "none", cursor: "pointer", boxShadow: T.glow }}>지금 시작하기</button>
          </div>
        </div>

        <style>{`@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}@keyframes spin{to{transform:rotate(360deg)}}@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}`}</style>
      </div>
    </Fade>
  );
}

function App() {
  const [mobileMenu, setMobileMenu] = useState(false);
  const [page, setPage] = useState("home");
  const [scrollY, setScrollY] = useState(0);
  const [faqOpen, setFaqOpen] = useState(null);

  /* Auth state */
  const [showLogin, setShowLogin] = useState(false);
  const [loginForm, setLoginForm] = useState({ email: "", pw: "" });
  const [loginLoading, setLoginLoading] = useState(false);
  const [loginError, setLoginError] = useState("");
  const [showSignup, setShowSignup] = useState(false);
  const [signupForm, setSignupForm] = useState({ company: "", name: "", email: "", pw: "", country: "", interest: "" });
  const [signupLoading, setSignupLoading] = useState(false);
  const [signupDone, setSignupDone] = useState(false);

  /* Search demo state */
  const [demoQuery, setDemoQuery] = useState("");
  const [demoResults, setDemoResults] = useState([]);
  const [demoLoading, setDemoLoading] = useState(false);
  const [demoSearched, setDemoSearched] = useState(false);
  const [demoBlurred, setDemoBlurred] = useState(false);
  const blurTimer = useRef(null);

  /* Sort, Filter, Pagination */
  const [sortMode, setSortMode] = useState("sim");
  const [originFilter, setOriginFilter] = useState("all");
  const [ageGroup, setAgeGroup] = useState("all");
  const [trendTab, setTrendTab] = useState("weekly");
  const [currentPage, setCurrentPage] = useState(1);
  const [totalResults, setTotalResults] = useState(0);
  const [loadingMore, setLoadingMore] = useState(false);

  /* Product Detail Modal */
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [translatedTitle, setTranslatedTitle] = useState("");
  const [translateLoading, setTranslateLoading] = useState(false);
  const [analysisData, setAnalysisData] = useState(null);
  const [analysisLoading, setAnalysisLoading] = useState(false);

  const [RELAY, setRelay] = useState((!location.hostname || location.hostname === "localhost" || location.hostname === "127.0.0.1" || location.protocol === "file:") ? "http://localhost:3456" : "");
  useEffect(() => { if(RELAY) return; fetch('relay-url.txt?t='+Date.now()).then(r=>r.ok?r.text():null).then(t=>{if(t){t=t.trim();if(t.startsWith('https://'))setRelay(t);}}).catch(()=>{}); }, []);
  const sb = window.supabase.createClient("https://lylktgxngrlxmsldxdqj.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx5bGt0Z3huZ3JseG1zbGR4ZHFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4MTQ2OTAsImV4cCI6MjA4NzM5MDY5MH0.8kgcDCMBT_STf43MVkeUUiq-K6r-Ytp3nUQ6d-nL2D0");

  useEffect(() => { const h = () => setScrollY(window.scrollY); window.addEventListener("scroll", h, { passive: true }); return () => window.removeEventListener("scroll", h); }, []);
  useEffect(() => { window.scrollTo(0, 0); }, [page]);
  useEffect(() => { return () => { if (blurTimer.current) clearTimeout(blurTimer.current); }; }, []);

  const nav = (p, hash) => { setPage(p); setMobileMenu(false); if (hash) setTimeout(() => document.getElementById(hash)?.scrollIntoView({ behavior: "smooth" }), 100); };
  const openLogin = () => { setShowLogin(true); setLoginError(""); setLoginForm({ email: "", pw: "" }); };
  const openSignup = () => { setShowSignup(true); setSignupDone(false); setSignupForm({ company: "", name: "", email: "", pw: "", country: "", interest: "" }); };

  /* Origin classification */
  const classifyOrigin = (maker, brand) => {
    const kr = /[가-힣]/;
    if (maker && kr.test(maker)) return "verified";
    if (brand && kr.test(brand)) return "likely_korean";
    return "unknown";
  };

  /* Search credit system */
  const [demoError, setDemoError] = useState("");
  const [searchCount, setSearchCount] = useState(() => {
    try { return parseInt(localStorage.getItem("whistle_search_count") || "0"); } catch { return 0; }
  });
  const FREE_SEARCH_LIMIT = 99; // 테스트용 (배포 시 3으로 변경)

  const BATCH_SIZE = 40;
  const MAX_PAGES = 3;

  const buildQuery = (q, age) => {
    const base = (q || "").trim();
    if (!base) return "";
    if (age && age !== "all") return age + " 인기 " + base;
    return base;
  };

  const runDemoSearch = (q, sort, age, append) => {
    const rawQuery = (q || demoQuery).trim();
    if (!rawQuery) return;
    const useSort = sort || sortMode;
    const useAge = age !== undefined ? age : ageGroup;
    const finalQuery = buildQuery(rawQuery, useAge);

    // 검색 크레딧 확인
    if (!append && searchCount >= FREE_SEARCH_LIMIT) {
      setDemoSearched(true);
      setDemoResults([]);
      setDemoError("FREE_LIMIT");
      return;
    }

    if (!append) {
      setDemoQuery(rawQuery);
      setDemoLoading(true);
      setDemoSearched(true);
      setDemoBlurred(false);
      setDemoError("");
      setCurrentPage(1);
      setOriginFilter("all");
      if (blurTimer.current) clearTimeout(blurTimer.current);
    } else {
      setLoadingMore(true);
    }

    const startIdx = append ? (currentPage * BATCH_SIZE + 1) : 1;
    fetch(RELAY + "/api/naver/search?q=" + encodeURIComponent(finalQuery) + "&display=" + BATCH_SIZE + "&start=" + startIdx + "&sort=" + useSort, {headers:{"ngrok-skip-browser-warning":"1"}})
      .then(r => r.json())
      .then(d => {
        if (d.ok && d.items) {
          const items = d.items.map(it => ({ ...it, origin: classifyOrigin(it.maker, it.brand) }));
          if (append) {
            setDemoResults(prev => [...prev, ...items]);
            setCurrentPage(p => p + 1);
          } else {
            setDemoResults(items);
            const newCount = searchCount + 1;
            setSearchCount(newCount);
            try { localStorage.setItem("whistle_search_count", String(newCount)); } catch {}
          }
          setTotalResults(d.total || 0);
        } else if (!append) { setDemoResults([]); setDemoError(d.error || "검색 결과가 없습니다"); }
        setDemoLoading(false);
        setLoadingMore(false);
        if (!append) blurTimer.current = setTimeout(() => setDemoBlurred(true), 15000);
      })
      .catch(e => { if (!append) { setDemoResults([]); setDemoError("서버 연결 실패: " + e.message); } setDemoLoading(false); setLoadingMore(false); });
  };

  const changeSort = (s) => { setSortMode(s); if (demoQuery) runDemoSearch(demoQuery, s); };
  const changeAge = (a) => { setAgeGroup(a); if (demoQuery) runDemoSearch(demoQuery, sortMode, a); };
  const loadMore = () => { if (!loadingMore && currentPage < MAX_PAGES) runDemoSearch(demoQuery, sortMode, ageGroup, true); };

  const filteredResults = originFilter === "all" ? demoResults : demoResults.filter(p => p.origin === originFilter);

  /* Product Detail */
  const openProductDetail = (p) => {
    setSelectedProduct(p);
    setTranslatedTitle("");
    setTranslateLoading(true);
    setAnalysisData(null);
    setAnalysisLoading(false);
    if (blurTimer.current) clearTimeout(blurTimer.current);
    // Translate title
    const rawTitle = (p.title || "").replace(/<[^>]*>/g, "");
    fetch(RELAY + "/api/translate", { method: "POST", headers: { "Content-Type": "application/json", "ngrok-skip-browser-warning": "1" }, body: JSON.stringify({ text: rawTitle, targetLang: "en" }) })
      .then(r => r.json())
      .then(d => { setTranslatedTitle(d.ok ? d.translated : ""); setTranslateLoading(false); })
      .catch(() => { setTranslateLoading(false); });
  };

  const requestAnalysis = () => {
    if (!selectedProduct?.link || analysisLoading) return;
    setAnalysisLoading(true);
    fetch(RELAY + "/api/whistle/analyze-anonymous", { method: "POST", headers: { "Content-Type": "application/json", "ngrok-skip-browser-warning": "1" }, body: JSON.stringify({ url: selectedProduct.link }) })
      .then(r => r.json())
      .then(d => { setAnalysisData(d.ok ? d.analysis : { error: d.error || "분석 실패" }); setAnalysisLoading(false); })
      .catch(e => { setAnalysisData({ error: e.message }); setAnalysisLoading(false); });
  };

  /* Login */
  const handleLogin = async () => {
    const { email, pw } = loginForm;
    if (!email || !pw) { setLoginError("이메일과 비밀번호를 입력해주세요."); return; }
    setLoginLoading(true); setLoginError("");
    try {
      const { data, error } = await sb.auth.signInWithPassword({ email, password: pw });
      if (error) { setLoginError(error.message === "Invalid login credentials" ? "이메일 또는 비밀번호가 올바르지 않습니다." : error.message); setLoginLoading(false); return; }
      const uid = data.user.id;
      const { data: u } = await sb.from("users").select("role").eq("id", uid).single();
      const role = u?.role || data.user.user_metadata?.role || "buyer";
      if (role === "client" || role === "seller") { window.location.href = "whistle.html"; }
      else { window.location.href = "buyer.html"; }
    } catch(e) { setLoginError("서버 연결에 실패했습니다. 다시 시도해주세요."); setLoginLoading(false); }
  };

  /* Signup */
  const handleSignup = async () => {
    const { company, name, email, pw, country, interest } = signupForm;
    if (!company || !name || !email || !pw) { alert("필수 항목을 모두 입력해주세요."); return; }
    if (pw.length < 6) { alert("비밀번호는 6자 이상이어야 합니다."); return; }
    setSignupLoading(true);
    try {
      const { data, error } = await sb.auth.signUp({ email, password: pw, options: { data: { role: "buyer", company_name: company, display_name: name } } });
      if (error) { alert(error.message.includes("already registered") ? "이미 등록된 이메일입니다." : error.message); setSignupLoading(false); return; }
      if (data.user) {
        try { await sb.from("users").upsert({ id: data.user.id, email, role: "buyer", company_name: company, display_name: name, country: country || null }, { onConflict: "id" }); } catch(e) {}
      }
      setSignupDone(true);
    } catch(e) { alert("서버 연결에 실패했습니다. 다시 시도해주세요."); }
    setSignupLoading(false);
  };

  const s = {
    section: { padding: "100px 24px", maxWidth: 1140, margin: "0 auto" },
    heading: { fontSize: 40, fontWeight: 800, color: T.w, letterSpacing: -1.5, lineHeight: 1.2, textAlign: "center" },
    sub: { fontSize: 17, color: T.w60, textAlign: "center", marginTop: 14, lineHeight: 1.7, maxWidth: 640, margin: "14px auto 0" },
    card: { background: T.bgCard, borderRadius: 16, border: `1px solid ${T.border}`, overflow: "hidden" },
    btn: (v = "pri") => ({ display: "inline-flex", alignItems: "center", justifyContent: "center", gap: 8, padding: "14px 32px", borderRadius: 12, fontFamily: "inherit", fontSize: 15, fontWeight: 700, cursor: "pointer", border: "none", transition: "all .25s",
      ...(v === "pri" ? { background: T.priG, color: T.bg, boxShadow: T.glow } : v === "acc" ? { background: T.accG, color: T.bg, boxShadow: T.glowAcc } : { background: "transparent", color: T.w, border: `1.5px solid ${T.borderL}` }) }),
    tag: (c) => ({ display: "inline-block", padding: "4px 12px", borderRadius: 8, fontSize: 12, fontWeight: 600, background: `${c}12`, color: c, border: `1px solid ${c}25` }),
    input: { width: "100%", padding: "12px 16px", borderRadius: 10, border: `1.5px solid ${T.border}`, background: T.bgSurface, color: T.w90, fontSize: 14, outline: "none" },
  };

  const Logo = ({ size = 26 }) => (
    <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
      <div style={{ width: size + 8, height: size + 8, borderRadius: 10, background: T.priG, display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 0 20px rgba(0,212,255,.3)" }}>
        <svg width={size * 0.6} height={size * 0.6} viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill={T.bg} /></svg>
      </div>
      <div><div style={{ fontSize: size * 0.65, fontWeight: 800, color: T.w, letterSpacing: -1 }}>Whistle AI</div><div style={{ fontSize: size * 0.33, color: T.w20, fontWeight: 500, letterSpacing: 2, marginTop: -2 }}>BUYER SOURCING</div></div>
    </div>
  );

  /* ═══ NAV ═══ */
  const navItems = [
    { label: "이용방법", action: () => nav("home", "howitworks") },
    { label: "서비스", action: () => nav("home", "services") },
    { label: "왜 한국?", action: () => nav("home", "whykorea") },
    { label: "FAQ", action: () => nav("home", "faq") },
  ];

  const header = (
    <div style={{ position: "fixed", top: 0, left: 0, right: 0, zIndex: 100, background: scrollY > 50 ? "rgba(6,11,24,.92)" : "transparent", backdropFilter: scrollY > 50 ? "blur(16px)" : "none", borderBottom: scrollY > 50 ? `1px solid ${T.border}` : "1px solid transparent", transition: "all .35s" }}>
      <div style={{ maxWidth: 1140, margin: "0 auto", display: "flex", alignItems: "center", justifyContent: "space-between", padding: "12px 24px" }}>
        <div onClick={() => nav("home")} style={{ cursor: "pointer" }}><Logo size={22} /></div>
        <div className="nav-desktop" style={{ display: "flex", alignItems: "center", gap: 6 }}>
          {navItems.map((n, i) => (
            <div key={i} onClick={n.action} style={{ padding: "6px 14px", fontSize: 14, fontWeight: 600, color: T.w60, cursor: "pointer", borderRadius: 8 }}>{n.label}</div>
          ))}
          <div style={{ width: 1, height: 24, background: T.w12, margin: "0 10px" }} />
          <div onClick={openLogin} style={{ padding: "10px 20px", fontSize: 14, fontWeight: 600, color: T.w60, cursor: "pointer", borderRadius: 10, border: `1.5px solid ${T.borderL}`, transition: "all .2s" }}>로그인</div>
          <div onClick={openSignup} style={s.btn("pri")}>무료 검색</div>
        </div>
        <div className="mobile-cta" style={{ display: "none", alignItems: "center", gap: 8 }}>
          <div onClick={() => document.getElementById("hero-search")?.scrollIntoView({ behavior: "smooth" })} style={{ ...s.btn("pri"), padding: "8px 16px", fontSize: 12 }}>검색</div>
          <div onClick={() => setMobileMenu(!mobileMenu)} style={{ width: 40, height: 40, borderRadius: 10, background: T.w08, display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 4, cursor: "pointer" }}>
            {mobileMenu ? <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M18 6L6 18M6 6l12 12" stroke={T.w60} strokeWidth="2.5" strokeLinecap="round"/></svg>
            : <>{[0,1,2].map(i => <div key={i} style={{ width: 18, height: 2, borderRadius: 1, background: T.w60 }} />)}</>}
          </div>
        </div>
      </div>
      {mobileMenu && (
        <div style={{ background: "rgba(6,11,24,.97)", backdropFilter: "blur(16px)", borderTop: `1px solid ${T.border}`, padding: "12px 24px 16px" }}>
          {navItems.map((n, i) => (
            <div key={i} onClick={() => { n.action(); setMobileMenu(false); }} style={{ padding: "12px 0", fontSize: 15, fontWeight: 600, color: T.w60, cursor: "pointer", borderBottom: `1px solid ${T.border}` }}>{n.label}</div>
          ))}
          <div onClick={() => { openLogin(); setMobileMenu(false); }} style={{ width: "100%", marginTop: 12, padding: "14px", fontSize: 14, fontWeight: 600, color: T.w60, cursor: "pointer", borderRadius: 12, border: `1.5px solid ${T.borderL}`, textAlign: "center" }}>로그인</div>
          <div onClick={() => { openSignup(); setMobileMenu(false); }} style={{ ...s.btn("pri"), width: "100%", marginTop: 8, padding: "14px", fontSize: 14 }}>무료 검색</div>
        </div>
      )}
    </div>
  );

  /* ═══ LOGIN MODAL ═══ */
  const loginModal = showLogin && (
    <div style={{ position: "fixed", inset: 0, zIndex: 200, display: "flex", alignItems: "center", justifyContent: "center", padding: 24 }}>
      <div onClick={() => setShowLogin(false)} style={{ position: "absolute", inset: 0, background: "rgba(0,0,0,.7)", backdropFilter: "blur(8px)" }} />
      <div style={{ position: "relative", width: "100%", maxWidth: 400, background: T.bgCard, borderRadius: 20, border: `1px solid ${T.borderL}`, boxShadow: "0 24px 80px rgba(0,0,0,.6)", overflow: "hidden" }}>
        <div onClick={() => setShowLogin(false)} style={{ position: "absolute", top: 16, right: 16, width: 32, height: 32, borderRadius: 16, background: T.w08, display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 16, color: T.w40, zIndex: 1 }}>&#x2715;</div>
        <div style={{ padding: "32px 28px" }}>
          <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 24 }}>
            <div style={{ width: 40, height: 40, borderRadius: 12, background: T.priG, display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 0 16px rgba(0,212,255,.25)" }}>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill={T.bg} /></svg>
            </div>
            <div><div style={{ fontSize: 20, fontWeight: 800, color: T.w }}>로그인</div><div style={{ fontSize: 11, color: T.w40 }}>Whistle AI 바이어 포털</div></div>
          </div>
          {loginError && <div style={{ background: `${T.err}12`, border: `1px solid ${T.err}30`, borderRadius: 10, padding: "10px 14px", marginBottom: 16, fontSize: 12, color: T.err, fontWeight: 600 }}>{loginError}</div>}
          <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
            <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>이메일</label><input type="email" value={loginForm.email} onChange={e => setLoginForm({...loginForm, email: e.target.value})} onKeyDown={e => { if (e.key === "Enter") handleLogin(); }} placeholder="your@email.com" style={s.input} /></div>
            <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>비밀번호</label><input type="password" value={loginForm.pw} onChange={e => setLoginForm({...loginForm, pw: e.target.value})} onKeyDown={e => { if (e.key === "Enter") handleLogin(); }} placeholder="비밀번호 입력" style={s.input} /></div>
            <button onClick={handleLogin} disabled={loginLoading} style={{ ...s.btn("pri"), width: "100%", padding: "16px", fontSize: 16, marginTop: 4, opacity: loginLoading ? 0.6 : 1 }}>{loginLoading ? "로그인 중..." : "로그인"}</button>
          </div>
          <div style={{ display: "flex", justifyContent: "space-between", marginTop: 16, fontSize: 12 }}>
            <span style={{ color: T.w40, cursor: "pointer" }} onClick={async () => { const email = loginForm.email.trim(); if (!email) { setLoginError("이메일을 먼저 입력해주세요."); return; } const { error } = await sb.auth.resetPasswordForEmail(email); if (error) setLoginError(error.message); else { setLoginError(""); alert("비밀번호 재설정 링크가 이메일로 발송되었습니다."); } }}>비밀번호 찾기</span>
            <span style={{ color: T.pri, cursor: "pointer", fontWeight: 600 }} onClick={() => { setShowLogin(false); openSignup(); }}>회원가입</span>
          </div>
        </div>
      </div>
    </div>
  );

  /* ═══ SIGNUP MODAL ═══ */
  const signupModal = showSignup && (
    <div style={{ position: "fixed", inset: 0, zIndex: 200, display: "flex", alignItems: "center", justifyContent: "center", padding: 24 }}>
      <div onClick={() => setShowSignup(false)} style={{ position: "absolute", inset: 0, background: "rgba(0,0,0,.7)", backdropFilter: "blur(8px)" }} />
      <div style={{ position: "relative", width: "100%", maxWidth: 440, background: T.bgCard, borderRadius: 20, border: `1px solid ${T.borderL}`, boxShadow: "0 24px 80px rgba(0,0,0,.6)", overflow: "hidden" }}>
        <div onClick={() => setShowSignup(false)} style={{ position: "absolute", top: 16, right: 16, width: 32, height: 32, borderRadius: 16, background: T.w08, display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 16, color: T.w40, zIndex: 1 }}>&#x2715;</div>
        {!signupDone ? (
          <div style={{ padding: "32px 28px" }}>
            <div style={{ fontSize: 22, fontWeight: 800, color: T.w, marginBottom: 4 }}>무료 회원가입</div>
            <div style={{ fontSize: 13, color: T.w40, marginBottom: 24 }}>검색 1회 즉시 증정 + 트렌드 리포트 열람. 카드 불필요.</div>
            <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10 }}>
                <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>회사명 *</label><input value={signupForm.company} onChange={e => setSignupForm({...signupForm, company: e.target.value})} placeholder="(주)회사명" style={s.input} /></div>
                <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>담당자명 *</label><input value={signupForm.name} onChange={e => setSignupForm({...signupForm, name: e.target.value})} placeholder="홍길동" style={s.input} /></div>
              </div>
              <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>이메일 *</label><input type="email" value={signupForm.email} onChange={e => setSignupForm({...signupForm, email: e.target.value})} placeholder="contact@company.com" style={s.input} /></div>
              <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>비밀번호 *</label><input type="password" value={signupForm.pw} onChange={e => setSignupForm({...signupForm, pw: e.target.value})} placeholder="6자 이상" style={s.input} /></div>
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10 }}>
                <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>국가</label>
                  <select value={signupForm.country} onChange={e => setSignupForm({...signupForm, country: e.target.value})} style={{ ...s.input, cursor: "pointer" }}>
                    <option value="">선택</option><option value="CN">중국</option><option value="US">미국</option><option value="JP">일본</option><option value="HK">홍콩</option><option value="VN">베트남</option><option value="RU">러시아</option><option value="TW">대만</option><option value="TH">태국</option><option value="AE">UAE</option><option value="SG">싱가포르</option>
                  </select>
                </div>
                <div><label style={{ fontSize: 11, fontWeight: 600, color: T.w40, marginBottom: 4, display: "block" }}>관심 카테고리</label>
                  <select value={signupForm.interest} onChange={e => setSignupForm({...signupForm, interest: e.target.value})} style={{ ...s.input, cursor: "pointer" }}>
                    <option value="">선택</option><option value="skincare">K-뷰티 / 스킨케어</option><option value="cosmetics">색조 화장품</option><option value="haircare">헤어케어</option><option value="supplement">건강보조식품</option><option value="food">식음료</option><option value="general">일반 제품</option>
                  </select>
                </div>
              </div>
              <button onClick={handleSignup} disabled={signupLoading} style={{ ...s.btn("pri"), width: "100%", padding: "16px", fontSize: 16, marginTop: 4, opacity: signupLoading ? 0.6 : 1 }}>{signupLoading ? "가입 처리 중..." : "무료 회원가입"}</button>
              <div style={{ textAlign: "center", marginTop: 8, fontSize: 12, color: T.w40 }}>이미 계정이 있으신가요? <span style={{ color: T.pri, cursor: "pointer", fontWeight: 600 }} onClick={() => { setShowSignup(false); openLogin(); }}>로그인</span></div>
            </div>
          </div>
        ) : (
          <div style={{ textAlign: "center", padding: "48px 28px" }}>
            <div style={{ width: 64, height: 64, borderRadius: 32, background: `${T.ok}15`, border: `2px solid ${T.ok}40`, display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 16px", fontSize: 28 }}>&#x2713;</div>
            <div style={{ fontSize: 22, fontWeight: 800, color: T.w, marginBottom: 8 }}>가입이 완료되었습니다!</div>
            <div style={{ fontSize: 14, color: T.w40, lineHeight: 1.6, marginBottom: 24 }}><span style={{ color: T.pri, fontWeight: 700 }}>{signupForm.company}</span>님, 환영합니다!<br />이메일 인증 후 로그인해주세요.</div>
            <button onClick={() => { setShowSignup(false); openLogin(); }} style={{ ...s.btn("pri"), padding: "16px 40px", fontSize: 15 }}>로그인하기</button>
            <div style={{ fontSize: 11, color: T.w20, marginTop: 12 }}>{signupForm.email}로 확인 이메일이 발송되었습니다</div>
          </div>
        )}
      </div>
    </div>
  );

  /* ═══ PRODUCT DETAIL MODAL ═══ */
  const productDetailModal = selectedProduct && (() => {
    const p = selectedProduct;
    const rawTitle = (p.title || "").replace(/<[^>]*>/g, "");
    const price = parseInt(p.lprice || 0).toLocaleString();
    const cats = [p.category1, p.category2, p.category3, p.category4].filter(Boolean).join(" > ");
    const summaryText = (() => {
      const parts = [];
      if (p.maker) parts.push(p.maker + "가 제조한");
      if (p.category1) parts.push(p.category1 + " 제품입니다.");
      else parts.push("제품입니다.");
      parts.push("네이버 쇼핑 " + price + "원.");
      if (p.origin === "verified") parts.push("AI 원산지 검증: 한국 제조 확인.");
      else if (p.origin === "likely_korean") parts.push("AI 원산지 검증: 한국 브랜드 추정.");
      return parts.join(" ");
    })();

    return (
      <div style={{ position: "fixed", inset: 0, zIndex: 250, display: "flex", alignItems: "center", justifyContent: "center", padding: 16 }}>
        <div onClick={() => setSelectedProduct(null)} style={{ position: "absolute", inset: 0, background: "rgba(0,0,0,.75)", backdropFilter: "blur(10px)" }} />
        <div style={{ position: "relative", width: "100%", maxWidth: 520, maxHeight: "90vh", overflowY: "auto", background: T.bgCard, borderRadius: 20, border: `1px solid ${T.borderL}`, boxShadow: "0 24px 80px rgba(0,0,0,.7)" }}>
          {/* Close button */}
          <div onClick={() => setSelectedProduct(null)} style={{ position: "sticky", top: 12, float: "right", marginRight: 12, width: 36, height: 36, borderRadius: 18, background: "rgba(0,0,0,.5)", backdropFilter: "blur(4px)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 18, color: T.w60, zIndex: 2 }}>&#x2715;</div>

          {/* Image */}
          {p.image && <img src={p.image} style={{ width: "100%", height: 240, objectFit: "cover", borderRadius: "20px 20px 0 0" }} onError={e => { e.target.style.display = "none"; }} />}

          <div style={{ padding: "20px 24px 24px" }}>
            {/* Origin badge large */}
            <div style={{ marginBottom: 12 }}>
              {p.origin === "verified"
                ? <span style={{ display: "inline-flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 8, fontSize: 13, fontWeight: 700, background: "rgba(0,230,118,.12)", color: T.ok, border: `1px solid ${T.ok}30` }}>&#x2705; 한국 제조 확인</span>
                : p.origin === "likely_korean"
                  ? <span style={{ display: "inline-flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 8, fontSize: 13, fontWeight: 700, background: "rgba(255,184,0,.12)", color: T.acc, border: `1px solid ${T.acc}30` }}>&#x26A0;&#xFE0F; 한국 브랜드 추정</span>
                  : <span style={{ display: "inline-flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 8, fontSize: 13, fontWeight: 700, background: T.w08, color: T.w40, border: `1px solid ${T.border}` }}>&#x2753; 원산지 미확인</span>
              }
            </div>

            {/* Title Korean */}
            <div style={{ fontSize: 18, fontWeight: 800, color: T.w, lineHeight: 1.4, marginBottom: 4 }}>{rawTitle}</div>

            {/* Title English (async) */}
            <div style={{ fontSize: 13, color: T.w40, marginBottom: 16, minHeight: 20 }}>
              {translateLoading
                ? <span style={{ color: T.pri, fontSize: 12 }}>&#x23F3; 영문 번역 중...</span>
                : translatedTitle
                  ? <span style={{ fontStyle: "italic" }}>{translatedTitle}</span>
                  : null
              }
            </div>

            {/* Price */}
            <div style={{ display: "flex", alignItems: "baseline", gap: 8, marginBottom: 16, padding: "12px 16px", borderRadius: 12, background: `${T.acc}08`, border: `1px solid ${T.acc}20` }}>
              <span style={{ fontSize: 10, color: T.w40 }}>한국 판매가</span>
              <span style={{ fontSize: 24, fontWeight: 800, color: T.acc }}>&#x20A9;{price}</span>
              <span style={{ fontSize: 12, color: T.w20 }}>원</span>
            </div>

            {/* Info grid */}
            <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 8, marginBottom: 16 }}>
              {p.maker && <div style={{ padding: "10px 12px", borderRadius: 10, background: T.bgSurface, border: `1px solid ${T.border}` }}><div style={{ fontSize: 10, color: T.w20, marginBottom: 2 }}>제조사</div><div style={{ fontSize: 13, fontWeight: 700, color: T.w90 }}>{p.maker}</div></div>}
              {p.brand && <div style={{ padding: "10px 12px", borderRadius: 10, background: T.bgSurface, border: `1px solid ${T.border}` }}><div style={{ fontSize: 10, color: T.w20, marginBottom: 2 }}>브랜드</div><div style={{ fontSize: 13, fontWeight: 700, color: T.w90 }}>{p.brand}</div></div>}
              {cats && <div style={{ padding: "10px 12px", borderRadius: 10, background: T.bgSurface, border: `1px solid ${T.border}`, gridColumn: !p.maker || !p.brand ? "span 1" : "span 2" }}><div style={{ fontSize: 10, color: T.w20, marginBottom: 2 }}>카테고리</div><div style={{ fontSize: 13, fontWeight: 600, color: T.w60 }}>{cats}</div></div>}
              {p.mallName && <div style={{ padding: "10px 12px", borderRadius: 10, background: T.bgSurface, border: `1px solid ${T.border}` }}><div style={{ fontSize: 10, color: T.w20, marginBottom: 2 }}>판매처</div><div style={{ fontSize: 13, fontWeight: 600, color: T.w60 }}>{p.mallName}</div></div>}
            </div>

            {/* AI Summary (template-based) */}
            <div style={{ padding: "14px 16px", borderRadius: 12, background: `${T.pri}06`, border: `1px solid ${T.pri}15`, marginBottom: 16 }}>
              <div style={{ display: "flex", alignItems: "center", gap: 6, marginBottom: 8 }}>
                <span style={{ fontSize: 12 }}>&#x1F916;</span>
                <span style={{ fontSize: 12, fontWeight: 700, color: T.pri }}>AI 요약</span>
              </div>
              <div style={{ fontSize: 13, color: T.w60, lineHeight: 1.6 }}>{summaryText}</div>
            </div>

            {/* Deep Analysis Section */}
            {!analysisData && !analysisLoading && (
              <button onClick={requestAnalysis} style={{ ...s.btn("ghost"), width: "100%", padding: "14px", fontSize: 13, marginBottom: 12, border: `1.5px dashed ${T.purple}40`, color: T.purple, background: `${T.purple}06` }}>
                &#x1F52C; AI 심층 분석 (제품 점수, HS코드, FOB 가격, 인증 요건)
              </button>
            )}
            {analysisLoading && (
              <div style={{ textAlign: "center", padding: "20px 16px", marginBottom: 12, borderRadius: 12, background: `${T.purple}06`, border: `1px solid ${T.purple}20` }}>
                <div style={{ width: 28, height: 28, border: `3px solid ${T.border}`, borderTopColor: T.purple, borderRadius: "50%", margin: "0 auto 10px", animation: "spin 1s linear infinite" }} />
                <div style={{ fontSize: 13, fontWeight: 600, color: T.purple }}>AI가 제품을 심층 분석하고 있습니다...</div>
                <div style={{ fontSize: 11, color: T.w40, marginTop: 4 }}>약 15~30초 소요됩니다</div>
              </div>
            )}
            {analysisData && !analysisData.error && (
              <div style={{ padding: "16px", borderRadius: 12, background: `${T.purple}06`, border: `1px solid ${T.purple}20`, marginBottom: 12 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 6, marginBottom: 12 }}>
                  <span style={{ fontSize: 12 }}>&#x1F52C;</span>
                  <span style={{ fontSize: 13, fontWeight: 700, color: T.purple }}>AI 심층 분석 결과</span>
                </div>
                <div style={{ fontSize: 12, color: T.w60, lineHeight: 1.7, whiteSpace: "pre-wrap" }}>
                  {typeof analysisData === "string" ? analysisData : JSON.stringify(analysisData, null, 2)}
                </div>
              </div>
            )}
            {analysisData?.error && (
              <div style={{ padding: "12px 16px", borderRadius: 10, background: `${T.err}08`, border: `1px solid ${T.err}20`, marginBottom: 12 }}>
                <div style={{ fontSize: 12, color: T.err, fontWeight: 600 }}>분석 실패: {analysisData.error}</div>
                <div style={{ fontSize: 11, color: T.w40, marginTop: 4 }}>네이버 상품 페이지가 복잡할 경우 분석에 실패할 수 있습니다.</div>
              </div>
            )}

            {/* Action button */}
            <button onClick={() => {
              // 관심 제품 localStorage에 저장 → 가입 후 buyer.html에서 자동 로드
              try {
                const saved = JSON.parse(localStorage.getItem("whistle_saved_products") || "[]");
                const exists = saved.some(s => s.link === p.link);
                if (!exists) {
                  saved.unshift({ title: rawTitle, lprice: p.lprice, image: p.image, link: p.link, maker: p.maker, brand: p.brand, origin: p.origin, category: cats, mallName: p.mallName, savedAt: new Date().toISOString() });
                  localStorage.setItem("whistle_saved_products", JSON.stringify(saved.slice(0, 20)));
                }
              } catch {}
              setSelectedProduct(null);
              openSignup();
            }} style={{ ...s.btn("pri"), width: "100%", padding: "16px", fontSize: 15 }}>
              &#x1F4E9; 인콰이어리 보내기
            </button>
            <div style={{ textAlign: "center", marginTop: 8, fontSize: 11, color: T.w20 }}>가입 후 Whistle 팀이 한국 제조사를 대신 컨택합니다</div>
          </div>
        </div>
      </div>
    );
  })();

  /* ═══ HERO + INTERACTIVE DEMO ═══ */
  const quickKeywords = ["달팽이크림", "시트마스크", "홍삼", "선크림", "비타민C세럼", "헤어세럼", "립틴트"];
  const sortOptions = [
    { key: "sim", label: "관련순" }, { key: "date", label: "최신순" },
    { key: "asc", label: "가격 낮은순" }, { key: "dsc", label: "가격 높은순" },
  ];
  const originFilters = [
    { key: "all", label: "전체" }, { key: "verified", label: "✅ 한국 제조" }, { key: "likely_korean", label: "⚠️ 한국 브랜드" },
  ];
  const ageOptions = [
    { key: "all", label: "전체" }, { key: "20대", label: "20대" }, { key: "30대", label: "30대" }, { key: "40대", label: "40대" }, { key: "50대", label: "50대+" },
  ];
  const trendData = {
    weekly: [
      { label: "💄 K-뷰티 TOP", query: "인기 스킨케어" },
      { label: "🍜 K-푸드 TOP", query: "인기 한국식품" },
      { label: "💊 건강식품 TOP", query: "인기 건강보조식품" },
      { label: "💇 헤어/바디", query: "인기 헤어케어" },
    ],
    monthly: [
      { label: "☀️ 선크림 베스트", query: "베스트 선크림" },
      { label: "🧴 마스크팩", query: "베스트 시트마스크" },
      { label: "🌿 홍삼 제품", query: "베스트 홍삼" },
      { label: "💋 립 메이크업", query: "베스트 립틴트" },
    ]
  };

  const originBadge = (origin) => {
    if (origin === "verified") return <span style={{ display: "inline-flex", alignItems: "center", gap: 3, padding: "2px 8px", borderRadius: 6, fontSize: 10, fontWeight: 700, background: "rgba(0,230,118,.12)", color: T.ok }}>&#x2705; 한국 제조 확인</span>;
    if (origin === "likely_korean") return <span style={{ display: "inline-flex", alignItems: "center", gap: 3, padding: "2px 8px", borderRadius: 6, fontSize: 10, fontWeight: 700, background: "rgba(255,184,0,.12)", color: T.acc }}>&#x26A0;&#xFE0F; 한국 브랜드</span>;
    return <span style={{ display: "inline-flex", alignItems: "center", gap: 3, padding: "2px 8px", borderRadius: 6, fontSize: 10, fontWeight: 700, background: T.w08, color: T.w40 }}>&#x2753; 미확인</span>;
  };

  const hero = (
    <div style={{ paddingTop: 100, position: "relative" }}>
      <div style={{ position: "absolute", inset: 0, background: "radial-gradient(ellipse at 50% 20%, rgba(0,212,255,.08) 0%, transparent 60%)", pointerEvents: "none" }} />
      <div style={{ maxWidth: 800, margin: "0 auto", textAlign: "center", padding: "40px 24px 0", position: "relative", zIndex: 1 }}>
        <span style={s.tag(T.pri)}>한국 트렌드 제품 소싱 플랫폼</span>
        <h1 className="hero-heading" style={{ fontSize: 48, fontWeight: 800, color: T.w, letterSpacing: -2, lineHeight: 1.15, margin: "20px 0 16px" }}>
          한국에서 지금 유행하는<br /><span style={{ background: T.priG, WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>진짜 제품을 찾아드립니다</span>
        </h1>
        <p className="hero-sub" style={{ fontSize: 17, color: T.w60, lineHeight: 1.7, maxWidth: 640, margin: "0 auto 32px" }}>
          한국 소비자들이 실제 구매하는 5천만+ 트렌드 제품을 실시간 검색.<br />AI 원산지 검증으로 진짜 한국산만 확인. 제조사 직접 연결.
        </p>
      </div>

      {/* Interactive search demo */}
      <div id="hero-search" style={{ maxWidth: 720, margin: "0 auto", padding: "0 24px 0", position: "relative", zIndex: 2 }}>
        <div style={{ ...s.card, padding: 24 }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 10 }}>
            <span style={{ fontSize: 12, fontWeight: 600, color: T.w40 }}>&#x1F50D; 한국 트렌드 검색</span>
            <span style={{ fontSize: 11, fontWeight: 600, color: searchCount >= FREE_SEARCH_LIMIT ? T.acc : T.ok }}>
              {searchCount >= FREE_SEARCH_LIMIT ? "무료 검색 소진 — 가입하면 무제한!" : `무료 검색 ${FREE_SEARCH_LIMIT - searchCount}/${FREE_SEARCH_LIMIT}회 남음`}
            </span>
          </div>
          <div style={{ display: "flex", gap: 10, marginBottom: 14 }}>
            <input value={demoQuery} onChange={e => setDemoQuery(e.target.value)} onKeyDown={e => { if (e.key === "Enter") runDemoSearch(); }} placeholder="한국에서 유행하는 진짜 제품을 검색하세요... (예: 달팽이크림)" style={{ ...s.input, flex: 1 }} />
            <button onClick={() => runDemoSearch()} disabled={searchCount >= FREE_SEARCH_LIMIT} style={{ ...s.btn("pri"), padding: "12px 24px", whiteSpace: "nowrap", opacity: searchCount >= FREE_SEARCH_LIMIT ? 0.5 : 1 }}>검색하기</button>
          </div>
          {/* 트렌드 탭 + 키워드 */}
          <div style={{ marginBottom: 12 }}>
            <div style={{ display: "flex", gap: 6, marginBottom: 8 }}>
              {[{key:"weekly",label:"🔥 이번 주 인기"},{key:"monthly",label:"📈 이번 달 인기"}].map(t => (
                <div key={t.key} onClick={() => setTrendTab(t.key)} style={{ padding: "5px 12px", borderRadius: 20, fontSize: 11, fontWeight: 700, background: trendTab === t.key ? `${T.acc}15` : T.w08, color: trendTab === t.key ? T.acc : T.w40, border: `1px solid ${trendTab === t.key ? T.acc+"40" : T.border}`, cursor: "pointer", transition: "all .2s" }}>{t.label}</div>
              ))}
            </div>
            <div style={{ display: "flex", gap: 6, flexWrap: "wrap", marginBottom: 8 }}>
              {trendData[trendTab].map((td, i) => (
                <div key={i} onClick={() => { setDemoQuery(td.query); setSortMode("sim"); runDemoSearch(td.query, "sim"); }} style={{ padding: "5px 12px", borderRadius: 20, fontSize: 11, fontWeight: 600, background: `${T.purple}08`, color: T.purple, border: `1px solid ${T.purple}20`, cursor: "pointer", transition: "all .2s" }}>{td.label}</div>
              ))}
            </div>
            <div style={{ display: "flex", gap: 6, flexWrap: "wrap" }}>
              {quickKeywords.map((kw, i) => (
                <div key={i} onClick={() => { setDemoQuery(kw); runDemoSearch(kw); }} style={{ padding: "5px 12px", borderRadius: 20, fontSize: 12, fontWeight: 600, background: `${T.pri}08`, color: T.pri, border: `1px solid ${T.pri}25`, cursor: "pointer", transition: "all .2s" }}>{kw}</div>
              ))}
            </div>
          </div>

          {/* 연령대 필터 */}
          <div style={{ display: "flex", gap: 4, marginBottom: 12, alignItems: "center" }}>
            <span style={{ fontSize: 10, color: T.w20, marginRight: 4 }}>연령대</span>
            {ageOptions.map(a => (
              <div key={a.key} onClick={() => changeAge(a.key)} style={{ padding: "3px 10px", borderRadius: 14, fontSize: 10, fontWeight: 600, background: ageGroup === a.key ? `${T.ok}15` : "transparent", color: ageGroup === a.key ? T.ok : T.w40, border: `1px solid ${ageGroup === a.key ? T.ok+"40" : T.border}`, cursor: "pointer", transition: "all .2s" }}>{a.label}</div>
            ))}
            <span style={{ fontSize: 9, color: T.w12, marginLeft: 4 }}>네이버 검색어 기반</span>
          </div>

          {demoLoading && (
            <div style={{ textAlign: "center", padding: 40 }}>
              <div style={{ width: 36, height: 36, border: `3px solid ${T.border}`, borderTopColor: T.pri, borderRadius: "50%", margin: "0 auto 12px", animation: "spin 1s linear infinite" }} />
              <div style={{ fontSize: 13, color: T.w40 }}>한국 트렌드 제품을 검색 중입니다...</div>
              <style>{`@keyframes spin{to{transform:rotate(360deg)}}`}</style>
            </div>
          )}

          {!demoLoading && demoSearched && demoResults.length > 0 && (
            <div style={{ position: "relative" }}>
              {/* 정렬 + 원산지 필터 + 결과 건수 */}
              <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", flexWrap: "wrap", gap: 8, marginBottom: 10 }}>
                <div style={{ display: "flex", gap: 4, flexWrap: "wrap" }}>
                  {sortOptions.map(so => (
                    <div key={so.key} onClick={() => changeSort(so.key)} style={{ padding: "4px 10px", borderRadius: 14, fontSize: 10, fontWeight: 700, background: sortMode === so.key ? T.pri : `${T.pri}08`, color: sortMode === so.key ? T.bg : T.pri, border: `1px solid ${sortMode === so.key ? T.pri : T.pri+"25"}`, cursor: "pointer", transition: "all .2s" }}>{so.label}</div>
                  ))}
                  <div style={{ width: 1, height: 20, background: T.border, margin: "0 4px" }} />
                  {originFilters.map(of => (
                    <div key={of.key} onClick={() => setOriginFilter(of.key)} style={{ padding: "4px 10px", borderRadius: 14, fontSize: 10, fontWeight: 600, background: originFilter === of.key ? `${T.ok}12` : "transparent", color: originFilter === of.key ? T.ok : T.w40, border: `1px solid ${originFilter === of.key ? T.ok+"30" : T.border}`, cursor: "pointer", transition: "all .2s" }}>{of.label}</div>
                  ))}
                </div>
                <span style={{ fontSize: 10, color: T.w20 }}>약 {totalResults.toLocaleString()}건 {originFilter !== "all" && `(필터: ${filteredResults.length}건)`}</span>
              </div>

              <div style={{ maxHeight: 600, overflowY: "auto", borderRadius: 12, paddingRight: 4 }}>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 12 }} className="grid-responsive">
                {filteredResults.map((p, i) => (
                  <div key={i} onClick={() => openProductDetail(p)} style={{ padding: 12, borderRadius: 12, background: T.bgSurface, border: `1px solid ${T.border}`, transition: "all .2s", cursor: "pointer" }}
                    onMouseEnter={e => { e.currentTarget.style.borderColor = T.pri; e.currentTarget.style.transform = "translateY(-2px)"; }}
                    onMouseLeave={e => { e.currentTarget.style.borderColor = T.border; e.currentTarget.style.transform = "translateY(0)"; }}>
                    {p.image && <img loading="lazy" src={p.image} style={{ width: "100%", height: 100, objectFit: "cover", borderRadius: 8, marginBottom: 8, background: T.w08 }} onError={e => { e.target.style.display = "none"; }} />}
                    <div style={{ display: "flex", gap: 4, marginBottom: 6, flexWrap: "wrap" }}>
                      <span style={{ display: "inline-block", padding: "2px 6px", borderRadius: 4, fontSize: 9, fontWeight: 700, background: "rgba(255,184,0,.1)", color: T.acc, border: "1px solid rgba(255,184,0,.2)" }}>Korea Market</span>
                      {originBadge(p.origin)}
                    </div>
                    <div style={{ fontSize: 12, fontWeight: 700, color: T.w90, marginBottom: 4, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }} dangerouslySetInnerHTML={{ __html: p.title || "상품" }} />
                    <div style={{ fontSize: 13, fontWeight: 800, color: T.acc }}>{parseInt(p.lprice || 0).toLocaleString()}<span style={{ fontSize: 10, fontWeight: 500, color: T.w40 }}>원</span> <span style={{ fontSize: 9, fontWeight: 500, color: T.w20 }}>(한국 판매가)</span></div>
                    {(p.maker || p.brand) && <div style={{ fontSize: 10, color: T.w40, marginTop: 3 }}>{p.maker ? "제조사: " + p.maker : ""}{p.brand ? (p.maker ? " | " : "") + "브랜드: " + p.brand : ""}</div>}
                  </div>
                ))}
              </div>
              </div>

              {/* 더 보기 / 페이지네이션 */}
              {!demoBlurred && currentPage < MAX_PAGES && demoResults.length >= BATCH_SIZE && (
                <div style={{ textAlign: "center", marginTop: 16 }}>
                  <button onClick={loadMore} disabled={loadingMore} style={{ ...s.btn("ghost"), padding: "12px 32px", fontSize: 13, opacity: loadingMore ? 0.6 : 1 }}>
                    {loadingMore ? "로딩 중..." : `더 보기 (+${BATCH_SIZE}개)`}
                  </button>
                  <div style={{ fontSize: 10, color: T.w20, marginTop: 6 }}>{demoResults.length}개 표시 중 / 약 {totalResults.toLocaleString()}건</div>
                </div>
              )}
              {currentPage >= MAX_PAGES && !demoBlurred && (
                <div style={{ textAlign: "center", marginTop: 16, padding: "16px", background: `${T.acc}08`, borderRadius: 12, border: `1px solid ${T.acc}20` }}>
                  <div style={{ fontSize: 13, fontWeight: 700, color: T.w, marginBottom: 6 }}>더 많은 결과를 보려면 가입하세요</div>
                  <button onClick={openSignup} style={{ ...s.btn("acc"), padding: "10px 24px", fontSize: 13 }}>무료 회원가입</button>
                </div>
              )}

              {demoBlurred && (
                <div style={{ position: "absolute", inset: 0, background: "rgba(6,11,24,.85)", backdropFilter: "blur(8px)", borderRadius: 12, display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 16 }}>
                  <div style={{ fontSize: 18, fontWeight: 800, color: T.w, textAlign: "center" }}>가입하면 더 많은 검색이 가능합니다</div>
                  <div style={{ fontSize: 13, color: T.w40, textAlign: "center" }}>트렌드 리포트 열람 + 인콰이어리 1건 포함</div>
                  <button onClick={openSignup} style={s.btn("pri")}>무료 회원가입</button>
                  <div style={{ fontSize: 12, color: T.w40 }}>이미 계정이 있으신가요? <span style={{ color: T.pri, cursor: "pointer", fontWeight: 600 }} onClick={openLogin}>로그인</span></div>
                </div>
              )}
            </div>
          )}

          {!demoLoading && demoSearched && demoResults.length === 0 && (
            <div style={{ textAlign: "center", padding: 30 }}>
              {demoError === "FREE_LIMIT" ? (
                <div style={{ background: `${T.acc}08`, border: `1px solid ${T.acc}25`, borderRadius: 12, padding: "24px 20px" }}>
                  <div style={{ fontSize: 16, fontWeight: 800, color: T.w, marginBottom: 6 }}>무료 검색 {FREE_SEARCH_LIMIT}회를 모두 사용했습니다</div>
                  <div style={{ fontSize: 13, color: T.w60, marginBottom: 16, lineHeight: 1.6 }}>무료 가입하면 <span style={{ color: T.acc, fontWeight: 700 }}>무제한 검색</span> + 트렌드 리포트 열람이 제공됩니다.<br />Starter($29/월)로 월 30회 심층 분석을 시작하세요.</div>
                  <div style={{ display: "flex", gap: 10, justifyContent: "center", flexWrap: "wrap" }}>
                    <button onClick={openSignup} style={s.btn("acc")}>무료 회원가입</button>
                    <button onClick={openLogin} style={s.btn("ghost")}>이미 회원이신가요?</button>
                  </div>
                </div>
              ) : demoError ? (
                <div style={{ background: `${T.err}10`, border: `1px solid ${T.err}25`, borderRadius: 10, padding: "14px 18px" }}>
                  <div style={{ fontSize: 13, color: T.err, fontWeight: 600, marginBottom: 4 }}>{demoError}</div>
                  <div style={{ fontSize: 11, color: T.w40 }}>서버 연결을 확인해주세요. 로컬 환경에서는 릴레이 서버(localhost:3456)가 실행 중이어야 합니다.</div>
                </div>
              ) : (
                <div style={{ fontSize: 13, color: T.w40 }}>검색 결과가 없습니다. 다른 키워드를 시도해보세요.</div>
              )}
            </div>
          )}
        </div>
      </div>

      {/* 후킹 CTA: 검색 크레딧 + 트렌드 리포트 */}
      <Fade>
        <div style={{ maxWidth: 720, margin: "32px auto 0", padding: "0 24px" }}>
          <div style={{ background: `linear-gradient(135deg, ${T.acc}08, ${T.pri}05)`, border: `1.5px solid ${T.acc}30`, borderRadius: 16, padding: "28px 32px" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 20 }}>
              <div style={{ width: 44, height: 44, borderRadius: 12, background: T.accG, display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0, boxShadow: T.glowAcc, fontSize: 20 }}>&#x1F525;</div>
              <div>
                <div style={{ fontSize: 18, fontWeight: 800, color: T.w }}>무료 가입하고 더 많은 기능을 사용하세요</div>
                <div style={{ fontSize: 12, color: T.w40, marginTop: 2 }}>카드 등록 없이 바로 시작</div>
              </div>
            </div>
            <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 12, marginBottom: 20 }} className="grid-responsive">
              {[
                { icon: "&#x1F50D;", title: "검색 1회 증정", desc: "가입만 하면 검색 1회 즉시 증정", color: T.pri },
                { icon: "&#x1F4CA;", title: "트렌드 리포트", desc: "카테고리별 인기 제품 TOP 30 어드민에서 열람", color: T.acc },
                { icon: "&#x1F4E9;", title: "인콰이어리 1건", desc: "제조사에게 직접 문의 또는 Whistle 대행", color: T.ok },
              ].map((item, i) => (
                <div key={i} style={{ padding: "16px 14px", borderRadius: 12, background: T.bgCard, border: `1px solid ${T.border}` }}>
                  <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
                    <span style={{ fontSize: 16 }} dangerouslySetInnerHTML={{ __html: item.icon }} />
                    <span style={{ fontSize: 13, fontWeight: 700, color: item.color }}>{item.title}</span>
                  </div>
                  <div style={{ fontSize: 11, color: T.w40, lineHeight: 1.5 }}>{item.desc}</div>
                </div>
              ))}
            </div>
            <div style={{ display: "flex", alignItems: "center", gap: 12, flexWrap: "wrap" }}>
              <button onClick={openSignup} style={{ ...s.btn("acc"), padding: "14px 28px", fontSize: 15 }}>무료 회원가입</button>
              <div style={{ fontSize: 12, color: T.w40 }}>Starter $29/월 (30회 검색) &middot; Pro $89/월 (200회) &middot; <span style={{ color: T.pri, cursor: "pointer" }} onClick={() => nav("home", "services")}>요금 상세</span></div>
            </div>
          </div>
        </div>
      </Fade>

      {/* 모션 데모 애니메이션 */}
      <DemoMotion openSignup={openSignup} />

      {/* Stats bar */}
      <div style={{ maxWidth: 800, margin: "40px auto 0", padding: "0 24px" }}>
        <div style={{ display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: 16, textAlign: "center" }} className="grid-responsive">
          {[["5천만+", "한국 내수 상품"], ["실시간", "트렌드 데이터"], ["AI", "원산지 검증"], ["24시간", "응답 시간"]].map(([val, label], i) => (
            <Fade key={i} delay={i * 0.1}>
              <div style={{ padding: "20px 12px" }}>
                <div style={{ fontSize: 28, fontWeight: 800, background: T.priG, WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>{val}</div>
                <div style={{ fontSize: 12, color: T.w40, marginTop: 4 }}>{label}</div>
              </div>
            </Fade>
          ))}
        </div>
      </div>
    </div>
  );

  /* ═══ PAIN POINTS ═══ */
  const painPoints = [
    { icon: "&#x1F525;", problem: "한국에서 뭐가 유행하는지 모름", solution: "네이버 쇼핑 5천만+ 실시간 데이터로 한국 소비자가 실제 구매하는 트렌드 제품을 검색합니다", color: T.pri },
    { icon: "&#x1F6AB;", problem: "B2B에서 산 'Korean' 제품이 가짜", solution: "AI가 제조사 데이터베이스를 교차 검증하여 진짜 한국산인지 확인합니다", color: T.err },
    { icon: "&#x1F3ED;", problem: "마음에 드는 제품의 공장을 못 찾음", solution: "한국 현지팀이 직접 제조사를 추적하고 연결합니다 ($200~$700)", color: T.acc },
    { icon: "&#x1F30F;", problem: "언어 장벽과 시차 문제", solution: "AI 번역 + 한국 현지 이중언어 팀이 커뮤니케이션을 지원합니다", color: T.purple },
  ];

  const painSection = (
    <div style={s.section}>
      <Fade><h2 style={s.heading} className="section-heading">한국 트렌드 제품, 이렇게 찾으세요</h2></Fade>
      <Fade delay={0.1}><p style={s.sub}>해외 바이어들이 한국 인기 제품을 소싱할 때 겪는 대표적인 어려움과 해결 방법입니다.</p></Fade>
      <div style={{ display: "grid", gridTemplateColumns: "repeat(2, 1fr)", gap: 16, marginTop: 48 }} className="grid-responsive">
        {painPoints.map((p, i) => (
          <Fade key={i} delay={i * 0.1}>
            <div style={{ ...s.card, padding: 28, height: "100%", display: "flex", flexDirection: "column" }}>
              <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16 }}>
                <div style={{ width: 44, height: 44, borderRadius: 12, background: `${p.color}12`, border: `1px solid ${p.color}25`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 20, flexShrink: 0 }} dangerouslySetInnerHTML={{ __html: p.icon }} />
                <div style={{ fontSize: 15, fontWeight: 700, color: T.w }}>{p.problem}</div>
              </div>
              <div style={{ fontSize: 13, color: T.w60, lineHeight: 1.6, flex: 1 }}>{p.solution}</div>
              <div style={{ marginTop: 12, padding: "6px 12px", borderRadius: 6, background: `${p.color}08`, border: `1px solid ${p.color}15`, display: "inline-flex", alignItems: "center", gap: 6, alignSelf: "flex-start" }}>
                <div style={{ width: 6, height: 6, borderRadius: 3, background: p.color }} />
                <span style={{ fontSize: 11, fontWeight: 600, color: p.color }}>Whistle AI 솔루션</span>
              </div>
            </div>
          </Fade>
        ))}
      </div>
    </div>
  );

  /* ═══ HOW IT WORKS ═══ */
  const steps = [
    { num: "01", title: "트렌드 검색", desc: "한국 소비자들이 실제 구매하는 5천만+ 내수 상품을 실시간으로 검색합니다. B2B에 없는 한국 히트상품을 발견하세요.", icon: "&#x1F50E;", color: T.pri },
    { num: "02", title: "검증 & 비교", desc: "AI가 제조사 데이터베이스와 대조하여 원산지를 검증합니다. 가격 비교, 인증 확인, 관심 제품 저장이 가능합니다.", icon: "&#x1F6E1;", color: T.ok },
    { num: "03", title: "문의 & 소싱", desc: "3가지 소싱 경로 중 선택하여 인콰이어리를 제출하세요. 한국 현지팀이 후속 처리합니다.", icon: "&#x1F4E6;", color: T.acc },
  ];

  const howSection = (
    <div id="howitworks" style={{ ...s.section, position: "relative" }}>
      <div style={{ position: "absolute", inset: 0, background: "radial-gradient(ellipse at 50% 50%, rgba(0,212,255,.03) 0%, transparent 60%)" }} />
      <div style={{ position: "relative", zIndex: 1 }}>
        <Fade><h2 style={s.heading} className="section-heading">이용 방법</h2></Fade>
        <Fade delay={0.1}><p style={s.sub}>검색부터 출하까지 — 3단계로 한국 제품을 소싱하세요.</p></Fade>
        <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 20, marginTop: 48 }} className="grid-responsive">
          {steps.map((st, i) => (
            <Fade key={i} delay={i * 0.15}>
              <div style={{ ...s.card, padding: 32, height: "100%", textAlign: "center", position: "relative" }}>
                <div style={{ position: "absolute", top: -14, left: "50%", transform: "translateX(-50%)", padding: "4px 16px", borderRadius: 20, background: st.color, fontSize: 12, fontWeight: 800, color: T.bg }}>STEP {st.num}</div>
                <div style={{ width: 56, height: 56, borderRadius: 16, background: `${st.color}12`, border: `1px solid ${st.color}25`, display: "flex", alignItems: "center", justifyContent: "center", margin: "16px auto 16px", fontSize: 24 }} dangerouslySetInnerHTML={{ __html: st.icon }} />
                <div style={{ fontSize: 18, fontWeight: 700, color: T.w, marginBottom: 10 }}>{st.title}</div>
                <div style={{ fontSize: 13, color: T.w40, lineHeight: 1.7 }}>{st.desc}</div>
              </div>
            </Fade>
          ))}
        </div>
      </div>
    </div>
  );

  /* ═══ PRICING & SERVICE ═══ */
  const tiers = [
    { title: "Free", price: "무료", priceNote: "가입 시 검색 1회 증정", desc: "트렌드 검색을 체험하고 소싱 가능성을 확인하세요.", features: ["가입 시 검색 1회 증정", "트렌드 리포트 열람", "제품 저장 5개", "인콰이어리 1건", "기본 원산지 배지"], color: T.pri, icon: "&#x1F50D;", popular: false },
    { title: "Starter", price: "$29", priceNote: "/월", desc: "정기적인 한국 트렌드 탐색과 소싱을 시작하세요.", features: ["월 30회 검색", "리포트 다운로드 1건/월", "제품 저장 50개", "인콰이어리 15건/월", "상세 원산지 검증"], color: T.acc, icon: "&#x1F680;", popular: true },
    { title: "Pro", price: "$89", priceNote: "/월", desc: "본격적인 대량 소싱과 공장 연결을 위한 프로 플랜.", features: ["월 200회 검색", "리포트 무제한 다운", "무제한 제품 저장", "인콰이어리 50건/월", "공장 컨택 할인", "우선 매칭"], color: T.purple, icon: "&#x1F451;", popular: false },
  ];

  const addons = [
    { name: "추가 검색 10회", price: "$9", icon: "&#x1F50D;" },
    { name: "트렌드 리포트 다운로드", price: "$19", icon: "&#x1F4CA;" },
    { name: "공장 컨택 (기본)", price: "$200~$300", icon: "&#x1F3ED;" },
    { name: "공장 컨택 (프리미엄)", price: "$500~$700", icon: "&#x2B50;" },
  ];

  const serviceSection = (
    <div id="services" style={s.section}>
      <Fade><h2 style={s.heading} className="section-heading">요금제 & 서비스</h2></Fade>
      <Fade delay={0.1}><p style={s.sub}>검색부터 대행까지, 필요에 맞는 플랜을 선택하세요.</p></Fade>
      <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 20, marginTop: 48 }} className="service-grid">
        {tiers.map((tier, i) => (
          <Fade key={i} delay={i * 0.12}>
            <div style={{ ...s.card, padding: 0, height: "100%", display: "flex", flexDirection: "column", position: "relative", border: tier.popular ? `2px solid ${tier.color}` : `1px solid ${T.border}` }}>
              {tier.popular && <div style={{ position: "absolute", top: -12, left: "50%", transform: "translateX(-50%)", padding: "4px 16px", borderRadius: 20, background: T.accG, fontSize: 11, fontWeight: 800, color: T.bg, whiteSpace: "nowrap" }}>추천</div>}
              <div style={{ padding: "28px 24px 0" }}>
                <div style={{ width: 48, height: 48, borderRadius: 14, background: `${tier.color}12`, border: `1px solid ${tier.color}25`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 22, marginBottom: 16 }} dangerouslySetInnerHTML={{ __html: tier.icon }} />
                <div style={{ fontSize: 20, fontWeight: 800, color: T.w, marginBottom: 4 }}>{tier.title}</div>
                <div style={{ marginBottom: 12 }}>
                  <span style={{ fontSize: 28, fontWeight: 800, color: tier.color }}>{tier.price}</span>
                  <span style={{ fontSize: 12, color: T.w40, marginLeft: 6 }}>{tier.priceNote}</span>
                </div>
                <div style={{ fontSize: 13, color: T.w40, lineHeight: 1.6, marginBottom: 20 }}>{tier.desc}</div>
              </div>
              <div style={{ padding: "0 24px 24px", flex: 1, display: "flex", flexDirection: "column" }}>
                <div style={{ flex: 1 }}>
                  {tier.features.map((f, j) => (
                    <div key={j} style={{ display: "flex", alignItems: "center", gap: 8, padding: "6px 0", fontSize: 13, color: T.w60 }}>
                      <div style={{ width: 16, height: 16, borderRadius: 8, background: `${tier.color}15`, display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>
                        <svg width="8" height="8" viewBox="0 0 24 24" fill="none"><path d="M20 6L9 17l-5-5" stroke={tier.color} strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/></svg>
                      </div>
                      {f}
                    </div>
                  ))}
                </div>
                <button onClick={openSignup} style={{ ...s.btn(tier.popular ? "acc" : "ghost"), width: "100%", marginTop: 20, padding: "14px" }}>{tier.price === "무료" ? "무료 시작" : "시작하기"}</button>
              </div>
            </div>
          </Fade>
        ))}
      </div>

      {/* Enterprise 별도 문의 */}
      <Fade delay={0.4}>
        <div style={{ marginTop: 24, ...s.card, padding: "24px 32px", display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: 16 }}>
          <div style={{ display: "flex", alignItems: "center", gap: 14 }}>
            <div style={{ width: 44, height: 44, borderRadius: 12, background: `${T.ok}12`, border: `1px solid ${T.ok}25`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 20 }}>&#x1F3E2;</div>
            <div>
              <div style={{ fontSize: 16, fontWeight: 800, color: T.w }}>Enterprise</div>
              <div style={{ fontSize: 12, color: T.w40, marginTop: 2 }}>전담 매니저 · 무제한 검색 · 맞춤 리포트 · 공장 컨택 포함 · 물류/서류 대행</div>
            </div>
          </div>
          <button onClick={() => { window.WC && window.WC.toggle(); }} style={{ ...s.btn("ghost"), padding: "12px 24px", fontSize: 14 }}>별도 문의</button>
        </div>
      </Fade>

      {/* 건별 추가 서비스 + 소싱 대행 수수료 */}
      <Fade delay={0.5}>
        <div style={{ marginTop: 40 }}>
          <h3 style={{ fontSize: 20, fontWeight: 700, color: T.w, textAlign: "center", marginBottom: 8 }}>건별 추가 서비스</h3>
          <p style={{ fontSize: 12, color: T.w40, textAlign: "center", marginBottom: 20 }}>플랜 관계없이 필요할 때 건별로 이용 가능</p>
          <div style={{ display: "flex", flexWrap: "wrap", gap: 12, justifyContent: "center", marginBottom: 24 }}>
            {addons.map((a, i) => (
              <div key={i} style={{ padding: "12px 18px", borderRadius: 12, background: T.bgCard, border: `1px solid ${T.border}`, display: "flex", alignItems: "center", gap: 10 }}>
                <span style={{ fontSize: 18 }} dangerouslySetInnerHTML={{ __html: a.icon }} />
                <div>
                  <div style={{ fontSize: 13, fontWeight: 600, color: T.w90 }}>{a.name}</div>
                  <div style={{ fontSize: 12, fontWeight: 700, color: T.acc }}>{a.price}</div>
                </div>
              </div>
            ))}
          </div>

          {/* 소싱 대행 수수료 테이블 */}
          <div style={{ ...s.card, overflow: "hidden", maxWidth: 600, margin: "0 auto" }}>
            <div style={{ padding: "14px 20px", background: T.bgSurface, borderBottom: `1px solid ${T.border}` }}>
              <div style={{ fontSize: 14, fontWeight: 700, color: T.w }}>&#x1F4B0; 소싱 대행 수수료</div>
              <div style={{ fontSize: 11, color: T.w40, marginTop: 2 }}>주문 금액 구간별 수수료 체계</div>
            </div>
            {[
              { range: "$3,000 미만", fee: "고정 $300", note: "소량 주문도 OK" },
              { range: "$3,000 ~ $30,000", fee: "8%", note: "가장 일반적" },
              { range: "$30,000 ~ $100,000", fee: "5%", note: "볼륨 할인" },
              { range: "$100,000 이상", fee: "3% (협의)", note: "Enterprise 추천" },
            ].map((row, i) => (
              <div key={i} style={{ display: "flex", alignItems: "center", justifyContent: "space-between", padding: "12px 20px", borderBottom: i < 3 ? `1px solid ${T.border}` : "none" }}>
                <div>
                  <div style={{ fontSize: 13, fontWeight: 600, color: T.w90 }}>{row.range}</div>
                  <div style={{ fontSize: 10, color: T.w40 }}>{row.note}</div>
                </div>
                <div style={{ fontSize: 15, fontWeight: 800, color: T.acc }}>{row.fee}</div>
              </div>
            ))}
          </div>
        </div>
      </Fade>
    </div>
  );

  /* ═══ WHY KOREA + ALIBABA COMPARISON ═══ */
  const koreaStats = [
    { icon: "&#x1F485;", label: "K-뷰티", value: "$125억", note: "세계 3위 화장품 수출국", color: T.pri },
    { icon: "&#x1F35C;", label: "K-푸드", value: "+18%", note: "전년 대비 수출 성장률", color: T.ok },
    { icon: "&#x1F4F1;", label: "전자제품", value: "글로벌", note: "삼성, LG, SK이노베이션", color: T.acc },
    { icon: "&#x1F48A;", label: "건강식품", value: "급성장", note: "홍삼, 건강보조식품", color: T.err },
    { icon: "&#x1F457;", label: "패션", value: "상승세", note: "K-패션 글로벌 수요 증가", color: T.purple },
    { icon: "&#x2699;", label: "산업재", value: "정밀", note: "첨단 제조 기술", color: T.w40 },
  ];

  const comparison = [
    { feature: "원산지 검증", alibaba: "자체 신고 (허위 빈번)", whistle: "AI가 제조사 데이터로 검증" },
    { feature: "상품 커버리지", alibaba: "수출용 리스팅만", whistle: "한국 내수 시장 전체 (5천만+)" },
    { feature: "공장 연결", alibaba: "무역상/중간상 대부분", whistle: "실제 제조사를 직접 찾아 연결" },
    { feature: "가격 투명성", alibaba: "숨겨진 커미션", whistle: "명확한 서비스 요금 ($200~$700)" },
    { feature: "언어 지원", alibaba: "기본 번역", whistle: "한국 현지 이중언어 팀" },
  ];

  const whySection = (
    <div id="whykorea" style={{ ...s.section, position: "relative" }}>
      <div style={{ position: "absolute", inset: 0, background: "radial-gradient(ellipse at 30% 50%, rgba(255,184,0,.03) 0%, transparent 50%)" }} />
      <div style={{ position: "relative", zIndex: 1 }}>
        <Fade><h2 style={s.heading} className="section-heading">왜 한국 제품이 유행할까요?</h2></Fade>
        <Fade delay={0.1}><p style={s.sub}>한국은 뷰티, 식품, 전자제품, 건강식품 분야의 글로벌 트렌드를 이끌고 있습니다.</p></Fade>

        <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 14, marginTop: 40 }} className="grid-responsive">
          {koreaStats.map((ks, i) => (
            <Fade key={i} delay={i * 0.08}>
              <div style={{ ...s.card, padding: 20 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 8 }}>
                  <span style={{ fontSize: 22 }} dangerouslySetInnerHTML={{ __html: ks.icon }} />
                  <span style={{ fontSize: 14, fontWeight: 700, color: T.w }}>{ks.label}</span>
                </div>
                <div style={{ fontSize: 24, fontWeight: 800, color: ks.color }}>{ks.value}</div>
                <div style={{ fontSize: 11, color: T.w40, marginTop: 2 }}>{ks.note}</div>
              </div>
            </Fade>
          ))}
        </div>

        {/* Comparison table */}
        <Fade delay={0.3}>
          <div style={{ marginTop: 60 }}>
            <h3 style={{ fontSize: 24, fontWeight: 800, color: T.w, textAlign: "center", marginBottom: 24 }}>알리바바 vs Whistle AI</h3>
            <div style={{ ...s.card, overflow: "hidden" }}>
              <div style={{ display: "grid", gridTemplateColumns: "1.5fr 1.5fr 1.5fr", background: T.bgSurface, padding: "14px 20px", borderBottom: `1px solid ${T.border}`, fontWeight: 700, fontSize: 13 }} className="compare-grid">
                <div style={{ color: T.w40 }}>항목</div>
                <div style={{ color: T.w40 }}>알리바바</div>
                <div style={{ color: T.pri }}>Whistle AI</div>
              </div>
              {comparison.map((row, i) => (
                <div key={i} style={{ display: "grid", gridTemplateColumns: "1.5fr 1.5fr 1.5fr", padding: "14px 20px", borderBottom: i < comparison.length - 1 ? `1px solid ${T.border}` : "none", fontSize: 13 }} className="compare-grid">
                  <div style={{ fontWeight: 600, color: T.w90 }}>{row.feature}</div>
                  <div style={{ color: T.w40 }}>{row.alibaba}</div>
                  <div style={{ color: T.ok, fontWeight: 600 }}>{row.whistle}</div>
                </div>
              ))}
            </div>
          </div>
        </Fade>
      </div>
    </div>
  );

  /* ═══ ORIGIN VERIFICATION ═══ */
  const verifySection = (
    <div style={s.section}>
      <Fade><h2 style={s.heading} className="section-heading">AI 원산지 검증 시스템</h2></Fade>
      <Fade delay={0.1}><p style={s.sub}>AI가 다중 데이터 소스를 교차 검증하여 실제 제조 원산지를 확인합니다.</p></Fade>

      <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 20, marginTop: 48 }} className="grid-responsive">
        {[
          { badge: "&#x2705; 한국 제조 확인", badgeColor: T.ok, subtitle: "공장 검증 완료", desc: "정부 데이터베이스와 상품 정보를 통해 한국 내 제조사가 확인된 제품입니다." },
          { badge: "&#x26A0;&#xFE0F; 한국 브랜드", badgeColor: T.acc, subtitle: "혼합 원산지", desc: "한국 브랜드는 확인되었으나, 일부 제품이 해외에서 제조될 수 있습니다." },
          { badge: "&#x2753; 미확인", badgeColor: T.w40, subtitle: "원산지 미확인", desc: "원산지 확인을 위한 데이터가 부족합니다. Whistle에 조사를 요청하실 수 있습니다." },
        ].map((v, i) => (
          <Fade key={i} delay={i * 0.12}>
            <div style={{ ...s.card, padding: 28, textAlign: "center", height: "100%" }}>
              <div style={{ width: 56, height: 56, borderRadius: 28, background: `${v.badgeColor}12`, border: `2px solid ${v.badgeColor}30`, display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 16px", fontSize: 24 }} dangerouslySetInnerHTML={{ __html: v.badge.split(" ")[0] }} />
              <div style={{ padding: "4px 14px", borderRadius: 8, display: "inline-block", fontSize: 12, fontWeight: 700, background: `${v.badgeColor}12`, color: v.badgeColor, border: `1px solid ${v.badgeColor}25`, marginBottom: 10 }} dangerouslySetInnerHTML={{ __html: v.badge }} />
              <div style={{ fontSize: 14, fontWeight: 700, color: T.w, marginBottom: 8 }}>{v.subtitle}</div>
              <div style={{ fontSize: 13, color: T.w40, lineHeight: 1.6 }}>{v.desc}</div>
            </div>
          </Fade>
        ))}
      </div>

      <Fade delay={0.3}>
        <div style={{ marginTop: 40, display: "flex", gap: 0, justifyContent: "center", flexWrap: "wrap" }}>
          {["데이터 수집", "DB 교차 검증", "공급망 분석", "인증서 확인"].map((step, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center" }}>
              <div style={{ padding: "10px 20px", borderRadius: 10, background: T.bgCard, border: `1px solid ${T.border}`, fontSize: 12, fontWeight: 600, color: T.w60 }}>{step}</div>
              {i < 3 && <div style={{ width: 30, height: 2, background: T.pri, margin: "0 -1px" }} />}
            </div>
          ))}
        </div>
      </Fade>
    </div>
  );

  /* ═══ TRUST SIGNALS ═══ */
  const trustSection = (
    <div style={{ padding: "60px 24px" }}>
      <GlowLine />
      <div style={{ maxWidth: 900, margin: "40px auto", textAlign: "center" }}>
        <div style={{ display: "flex", justifyContent: "center", gap: 48, flexWrap: "wrap", marginBottom: 32 }}>
          {[["15+", "서비스 국가"], ["500+", "처리된 문의"], ["200+", "검증된 공급사"]].map(([val, label], i) => (
            <Fade key={i} delay={i * 0.1}>
              <div>
                <div style={{ fontSize: 36, fontWeight: 800, background: T.priG, WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>{val}</div>
                <div style={{ fontSize: 12, color: T.w40, marginTop: 4 }}>{label}</div>
              </div>
            </Fade>
          ))}
        </div>
        <Fade delay={0.3}>
          <div style={{ display: "flex", justifyContent: "center", gap: 8, flexWrap: "wrap" }}>
            {["CN", "US", "JP", "HK", "VN", "RU", "TW", "TH", "AE", "SG", "MY", "PH", "ID", "AU", "FR"].map((code, i) => {
              const flags = { CN: "&#x1F1E8;&#x1F1F3;", US: "&#x1F1FA;&#x1F1F8;", JP: "&#x1F1EF;&#x1F1F5;", HK: "&#x1F1ED;&#x1F1F0;", VN: "&#x1F1FB;&#x1F1F3;", RU: "&#x1F1F7;&#x1F1FA;", TW: "&#x1F1F9;&#x1F1FC;", TH: "&#x1F1F9;&#x1F1ED;", AE: "&#x1F1E6;&#x1F1EA;", SG: "&#x1F1F8;&#x1F1EC;", MY: "&#x1F1F2;&#x1F1FE;", PH: "&#x1F1F5;&#x1F1ED;", ID: "&#x1F1EE;&#x1F1E9;", AU: "&#x1F1E6;&#x1F1FA;", FR: "&#x1F1EB;&#x1F1F7;" };
              return <span key={i} style={{ fontSize: 24, padding: "4px 6px", borderRadius: 8, background: T.w08, cursor: "default" }} title={code} dangerouslySetInnerHTML={{ __html: flags[code] }} />;
            })}
          </div>
        </Fade>
      </div>
      <GlowLine />
    </div>
  );

  /* ═══ FAQ ═══ */
  const faqs = [
    { q: "Whistle AI는 알리바바와 무엇이 다른가요?", a: "알리바바는 수출용으로 등록된 상품만 자체 신고 기반으로 제공합니다. Whistle은 네이버 쇼핑을 통해 한국 내수 이커머스 전체(5천만+ 상품)를 검색하고, AI로 제조사 데이터베이스와 대조하여 원산지를 검증합니다. 또한 무역상이 아닌 실제 공장과 직접 연결해드립니다." },
    { q: "한국 트렌드 제품은 어떻게 검색하나요?", a: "네이버 쇼핑 API를 활용하여 한국 소비자들이 실제로 구매하고 있는 5천만+ 상품을 실시간으로 검색합니다. 이 제품들은 대부분 B2B 수출 플랫폼에 등록되지 않은 한국 내수 히트상품으로, 해외에서는 찾기 어려운 제품입니다." },
    { q: "AI 원산지 검증은 어떻게 작동하나요?", a: "AI가 상품 리스팅의 제조사(maker)와 브랜드 데이터를 한국 정부 데이터베이스, 사업자등록부, 인증 기록과 교차 검증하여 해당 제품이 실제로 한국에서 제조되었는지 확인합니다." },
    { q: "공장 컨택 서비스에는 무엇이 포함되나요?", a: "기본($200~300): 실제 제조사를 특정하고, 직접 컨택을 시도하며, 컨택 실패 시에도 연락처 정보를 보장합니다. 프리미엄($500~700): 미팅 조율, 통역, 샘플 요청 대행, 연결될 때까지 재시도를 포함합니다." },
    { q: "최소 주문 수량(MOQ)이 있나요?", a: "MOQ는 제조사마다 다릅니다. Whistle 인증 제품은 상품 페이지에 MOQ가 표시됩니다. Korea Market 제품은 공장 컨택 서비스의 일환으로 MOQ를 협상합니다. 많은 한국 제조사들이 100~500개 단위 주문을 수락합니다." },
    { q: "어느 나라로 배송이 가능한가요?", a: "전 세계 바이어를 위한 소싱을 지원합니다. 주요 시장은 중국, 미국, 일본, 홍콩, 베트남, 러시아, 대만, 태국, UAE, 싱가포르입니다. 배송 물류는 건별로 조율됩니다." },
    { q: "요금 구조가 어떻게 되나요?", a: "비회원 1회, 무료 가입 시 +1회 검색이 증정됩니다. Starter($29/월)는 월 30회 검색+인콰이어리 15건, Pro($89/월)는 월 200회 검색+인콰이어리 50건+공장 컨택 할인입니다. Enterprise는 별도 문의(전담 매니저, 무제한). 건별로도 이용 가능합니다(검색 10회 $9, 리포트 $19, 공장 컨택 $200~$700). 소싱 대행은 주문금액 $3,000 미만 고정 $300, 이상은 5~8% 수수료입니다." },
    { q: "먼저 샘플을 받아볼 수 있나요?", a: "네! 샘플 발송 대행은 공장 컨택 및 맞춤 소싱 서비스에 포함됩니다. Whistle 인증 제품은 직접 샘플 요청이 가능합니다. 샘플 배송비는 일반적으로 바이어 부담입니다." },
  ];

  const faqSection = (
    <div id="faq" style={s.section}>
      <Fade><h2 style={s.heading} className="section-heading">자주 묻는 질문</h2></Fade>
      <div style={{ maxWidth: 700, margin: "40px auto 0" }}>
        {faqs.map((f, i) => (
          <Fade key={i} delay={i * 0.06}>
            <div style={{ borderBottom: `1px solid ${T.border}` }}>
              <div onClick={() => setFaqOpen(faqOpen === i ? null : i)} style={{ padding: "18px 0", display: "flex", justifyContent: "space-between", alignItems: "center", cursor: "pointer" }}>
                <span style={{ fontSize: 15, fontWeight: 600, color: faqOpen === i ? T.pri : T.w, transition: "color .2s", paddingRight: 16 }}>{f.q}</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style={{ flexShrink: 0, transform: faqOpen === i ? "rotate(180deg)" : "rotate(0)", transition: "transform .3s" }}><path d="M6 9l6 6 6-6" stroke={faqOpen === i ? T.pri : T.w40} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg>
              </div>
              {faqOpen === i && (
                <div style={{ paddingBottom: 18, fontSize: 14, color: T.w40, lineHeight: 1.7, animation: "fadeIn .3s" }}>{f.a}</div>
              )}
            </div>
          </Fade>
        ))}
      </div>
      <style>{`@keyframes fadeIn{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}`}</style>
    </div>
  );

  /* ═══ FINAL CTA ═══ */
  const ctaSection = (
    <div style={{ padding: "80px 24px", position: "relative" }}>
      <div style={{ position: "absolute", inset: 0, background: "radial-gradient(ellipse at center, rgba(0,212,255,.06) 0%, transparent 70%)" }} />
      <div style={{ maxWidth: 600, margin: "0 auto", textAlign: "center", position: "relative", zIndex: 1 }}>
        <h2 style={{ fontSize: 32, fontWeight: 800, color: T.w, letterSpacing: -0.5, marginBottom: 12 }}>한국에서 유행하는 진짜 제품,<br />지금 바로 찾아보세요</h2>
        <p style={{ fontSize: 14, color: T.w40, marginBottom: 32 }}>1회 무료 검색. 가입하면 +1회 증정. Starter $29/월부터.</p>
        <div style={{ display: "flex", gap: 12, justifyContent: "center", flexWrap: "wrap" }}>
          <div onClick={openSignup} style={s.btn("pri")}>무료 회원가입</div>
          <div onClick={() => document.getElementById("hero-search")?.scrollIntoView({ behavior: "smooth" })} style={s.btn("ghost")}>먼저 검색해보기</div>
        </div>
      </div>
    </div>
  );

  /* ═══ FOOTER ═══ */
  const footer = (
    <div style={{ background: T.deep, borderTop: `1px solid ${T.border}`, padding: "40px 24px 24px" }}>
      <div className="footer-flex" style={{ maxWidth: 1140, margin: "0 auto", display: "flex", justifyContent: "space-between", alignItems: "flex-start", flexWrap: "wrap", gap: 24 }}>
        <div><Logo size={22} /><div style={{ fontSize: 11, color: T.w20, lineHeight: 1.8, marginTop: 10 }}>모티브이노베이션 · 한국 트렌드 제품 소싱 플랫폼<br />contact@whistleai.co.kr</div></div>
        <div className="footer-links" style={{ display: "flex", gap: 32 }}>
          {[["소싱", [["이용방법", () => nav("home", "howitworks")], ["서비스", () => nav("home", "services")]]], ["정보", [["왜 한국?", () => nav("home", "whykorea")], ["FAQ", () => nav("home", "faq")]]], ["바로가기", [["셀러 포털", () => { window.location.href = "whistle-landing.html"; }], ["바이어 포털", () => { window.location.href = "buyer.html"; }]]]].map(([t, links], i) => (
            <div key={i}><div style={{ fontSize: 12, fontWeight: 700, color: T.w20, marginBottom: 8 }}>{t}</div>{links.map(([l, a], j) => <div key={j} onClick={a} style={{ fontSize: 12, color: T.w40, cursor: "pointer", marginBottom: 4 }}>{l}</div>)}</div>
          ))}
        </div>
      </div>
      <div style={{ maxWidth: 1140, margin: "0 auto", borderTop: `1px solid ${T.border}`, marginTop: 24, paddingTop: 16, display: "flex", justifyContent: "space-between", fontSize: 11, color: T.w20, flexWrap: "wrap", gap: 8 }}>
        <span>&copy; 2026 Motive Innovation. All rights reserved.</span>
        <span>Whistle AI &middot; 한국 트렌드 제품 소싱 플랫폼</span>
      </div>
    </div>
  );

  /* ═══ RENDER ═══ */
  return (
    <div style={{ fontFamily: "'Sora','Noto Sans KR',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif", background: T.bg, color: T.w, minHeight: "100vh" }}>
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=Noto+Sans+KR:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');
        *{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}a{text-decoration:none}
        button{cursor:pointer;font-family:inherit}select,input,textarea{font-family:inherit}
        input:focus,textarea:focus,select:focus{border-color:${T.pri} !important;outline:none}
        select option{background:${T.bgCard};color:${T.w90}}::selection{background:${T.pri}40;color:${T.w}}
        ::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:${T.bg}}::-webkit-scrollbar-thumb{background:${T.w12};border-radius:3px}
      `}</style>
      {loginModal}
      {signupModal}
      {productDetailModal}
      {header}
      {hero}
      {painSection}
      {howSection}
      {serviceSection}
      {whySection}
      <GlowLine />
      {verifySection}
      {trustSection}
      {faqSection}
      {ctaSection}
      {footer}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
</script>
<!-- 실시간 문의 채팅 위젯 -->
<script>
(function(){
  var RELAY=(!location.hostname||location.hostname==='localhost'||location.hostname==='127.0.0.1'||location.protocol==='file:')?'http://localhost:3456':'';
  (function(){if(RELAY)return;var x=new XMLHttpRequest();x.open('GET','relay-url.txt?t='+Date.now(),false);try{x.send();if(x.status===200){var u=x.responseText.trim();if(u.startsWith('https://'))RELAY=u;}}catch(e){}})();
  var PAGE='buyer-landing';
  var open=false,step=0,msgs=[],info={name:'',email:'',phone:''};
  var el=document.createElement('div');el.id='wc-root';document.body.appendChild(el);

  function r(){
    var html='';
    html+='<div onclick="WC.toggle()" style="position:fixed;bottom:24px;right:24px;z-index:9999;width:56px;height:56px;border-radius:28px;background:linear-gradient(135deg,#00D4FF,#0088FF);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 20px rgba(0,212,255,.4);transition:transform .2s">';
    html+=open?'<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M18 6L6 18M6 6l12 12" stroke="#060B18" stroke-width="2.5" stroke-linecap="round"/></svg>'
              :'<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" fill="#060B18"/></svg>';
    html+='</div>';

    if(!open){el.innerHTML=html;return;}

    html+='<div style="position:fixed;bottom:90px;right:24px;z-index:9998;width:360px;max-height:520px;background:#0D1424;border-radius:16px;border:1px solid rgba(255,255,255,.1);box-shadow:0 16px 60px rgba(0,0,0,.6);display:flex;flex-direction:column;overflow:hidden;font-family:Sora,Noto Sans KR,sans-serif">';
    html+='<div style="padding:14px 18px;background:linear-gradient(135deg,#00D4FF20,#0088FF10);border-bottom:1px solid rgba(255,255,255,.08);display:flex;align-items:center;gap:10px">';
    html+='<div style="width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#00D4FF,#0088FF);display:flex;align-items:center;justify-content:center"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#060B18"/></svg></div>';
    html+='<div><div style="font-size:14px;font-weight:700;color:#fff">Whistle AI</div><div style="font-size:11px;color:rgba(255,255,255,.4)">소싱 상담</div></div>';
    html+='<div style="margin-left:auto;display:flex;align-items:center;gap:4px"><div style="width:6px;height:6px;border-radius:3px;background:#00E676"></div><span style="font-size:10px;color:#00E676">온라인</span></div>';
    html+='</div>';

    html+='<div id="wc-msgs" style="flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:8px;min-height:200px;max-height:320px">';
    if(msgs.length===0&&step===0){
      html+=bubble('bot','안녕하세요! Whistle AI 한국 트렌드 소싱 상담입니다. 무엇을 도와드릴까요?');
      html+=qbtns(['제품 검색','공장 컨택','OEM/ODM','일반 문의']);
    }
    for(var i=0;i<msgs.length;i++){html+=bubble(msgs[i].from,msgs[i].text);}
    if(step===1){
      html+=bubble('bot','상담을 위해 간단한 정보를 알려주세요.');
      html+='<div style="display:flex;flex-direction:column;gap:6px;align-self:flex-start;width:100%">';
      html+='<input id="wc-name" placeholder="이름/회사명" value="'+esc(info.name)+'" style="padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:#111B2E;color:rgba(255,255,255,.9);font-size:13px;outline:none;width:100%">';
      html+='<input id="wc-email" placeholder="이메일 (선택)" value="'+esc(info.email)+'" style="padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:#111B2E;color:rgba(255,255,255,.9);font-size:13px;outline:none;width:100%">';
      html+='<button onclick="WC.submitInfo()" style="padding:10px;border-radius:8px;border:none;background:linear-gradient(135deg,#00D4FF,#0088FF);color:#060B18;font-weight:700;font-size:13px;cursor:pointer">상담 시작</button>';
      html+='</div>';
    }
    html+='</div>';

    if(step>=2){
      html+='<div style="padding:10px 14px;border-top:1px solid rgba(255,255,255,.08);display:flex;gap:8px">';
      html+='<input id="wc-input" onkeydown="if(event.key===\'Enter\')WC.send()" placeholder="메시지를 입력하세요..." style="flex:1;padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:#111B2E;color:rgba(255,255,255,.9);font-size:13px;outline:none">';
      html+='<button onclick="WC.send()" style="width:40px;height:40px;border-radius:10px;border:none;background:linear-gradient(135deg,#00D4FF,#0088FF);cursor:pointer;display:flex;align-items:center;justify-content:center"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z" fill="#060B18"/></svg></button>';
      html+='</div>';
    }
    html+='</div>';
    el.innerHTML=html;
    var mc=document.getElementById('wc-msgs');if(mc)mc.scrollTop=mc.scrollHeight;
  }

  function bubble(from,text){
    if(from==='bot')return '<div style="align-self:flex-start;max-width:85%;padding:10px 14px;border-radius:12px 12px 12px 4px;background:#111B2E;border:1px solid rgba(255,255,255,.06)"><div style="font-size:13px;color:rgba(255,255,255,.75);line-height:1.5">'+text+'</div></div>';
    return '<div style="align-self:flex-end;max-width:85%;padding:10px 14px;border-radius:12px 12px 4px 12px;background:linear-gradient(135deg,#00D4FF20,#0088FF15);border:1px solid #00D4FF30"><div style="font-size:13px;color:rgba(255,255,255,.9);line-height:1.5">'+text+'</div></div>';
  }
  function qbtns(arr){
    var h='<div style="display:flex;flex-wrap:wrap;gap:6px;align-self:flex-start">';
    for(var i=0;i<arr.length;i++)h+='<div onclick="WC.pick(\''+esc(arr[i])+'\')" style="padding:6px 12px;border-radius:8px;border:1px solid rgba(0,212,255,.3);background:rgba(0,212,255,.06);color:#00D4FF;font-size:12px;font-weight:600;cursor:pointer;transition:background .2s">'+arr[i]+'</div>';
    return h+'</div>';
  }
  function esc(s){return String(s||'').replace(/"/g,'&quot;').replace(/'/g,'&#39;').replace(/</g,'&lt;');}

  var autoReplies={
    '제품 검색':'상단 검색창에서 바로 한국 제품을 검색해보세요! 네이버 쇼핑 5천만+ 상품을 검색할 수 있습니다. 무료 가입하시면 무제한 검색이 가능합니다.',
    '공장 컨택':'공장 컨택 서비스($200~$700)는 찾으신 제품의 실제 한국 제조사를 특정하고 연결해드립니다. 연락처 정보를 보장합니다. 관심 있으신가요?',
    'OEM/ODM':'OEM/ODM 프로젝트를 위해 한국 제조사와 직접 연결해드립니다. 커뮤니케이션, 네고시에이션, 샘플 발송까지 지원합니다. 아래에서 요구사항을 공유해주세요.',
    '일반 문의':'한국 제품 소싱에 관한 어떤 질문이든 자유롭게 남겨주세요. 담당자가 24시간 내 답변드리겠습니다.'
  };

  window.WC={
    toggle:function(){open=!open;r();},
    pick:function(t){msgs.push({from:'user',text:t});if(autoReplies[t]){msgs.push({from:'bot',text:autoReplies[t]});msgs.push({from:'bot',text:'상담을 위해 간단한 정보를 남겨주세요.'});step=1;}r();},
    submitInfo:function(){
      var n=document.getElementById('wc-name');var e=document.getElementById('wc-email');
      info.name=n?n.value:'';info.email=e?e.value:'';
      if(!info.name){alert('이름/회사명을 입력해주세요.');return;}
      msgs.push({from:'bot',text:info.name+'님, 반갑습니다! 궁금한 점을 자유롭게 입력해주세요.'});step=2;r();
    },
    send:function(){
      var inp=document.getElementById('wc-input');if(!inp||!inp.value.trim())return;
      var msg=inp.value.trim();msgs.push({from:'user',text:msg});r();
      fetch(RELAY+'/api/whistle/chat-inquiry',{method:'POST',headers:{'Content-Type':'application/json','ngrok-skip-browser-warning':'1'},body:JSON.stringify({name:info.name,email:info.email,phone:info.phone,message:msg,page:PAGE})})
        .then(function(r){return r.json();}).then(function(d){if(d.ok){msgs.push({from:'bot',text:d.reply||'접수되었습니다. 담당자가 확인 후 연락드리겠습니다.'});r();}})
        .catch(function(){msgs.push({from:'bot',text:'전송에 실패했습니다. 잠시 후 다시 시도해주세요.'});r();});
    }
  };
  r();
})();
</script>
</body>
</html>
