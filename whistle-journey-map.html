<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whistle AI - Service Journey Map & QA Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0f1117;--surface:#1a1d27;--surface2:#242836;--surface3:#2e3344;
  --border:#363b4e;--text:#e4e7ef;--text2:#9ba1b7;--text3:#6b7190;
  --pri:#6366f1;--pri-light:#818cf8;--pri-bg:rgba(99,102,241,.12);
  --green:#22c55e;--green-bg:rgba(34,197,94,.12);
  --red:#ef4444;--red-bg:rgba(239,68,68,.12);
  --yellow:#eab308;--yellow-bg:rgba(234,179,8,.12);
  --blue:#3b82f6;--blue-bg:rgba(59,130,246,.12);
  --orange:#f97316;--orange-bg:rgba(249,115,22,.12);
  --radius:12px;--radius-sm:8px;
}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);overflow:hidden;height:100vh}
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

/* Layout */
.app{display:flex;height:100vh}
.sidebar{width:320px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;flex-shrink:0;z-index:100;transition:transform .3s}
.sidebar.collapsed{transform:translateX(-320px);margin-right:-320px}
.sidebar-header{padding:20px;border-bottom:1px solid var(--border)}
.sidebar-header h1{font-size:18px;font-weight:800;background:linear-gradient(135deg,var(--pri-light),#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.sidebar-header p{font-size:12px;color:var(--text3);margin-top:4px}
.sidebar-search{padding:12px 16px}
.sidebar-search input{width:100%;padding:10px 14px;background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-sm);color:var(--text);font-size:13px;outline:none}
.sidebar-search input:focus{border-color:var(--pri)}
.sidebar-nav{flex:1;overflow-y:auto;padding:8px}
.sidebar-nav::-webkit-scrollbar{width:4px}
.sidebar-nav::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}

.nav-group{margin-bottom:4px}
.nav-group-header{display:flex;align-items:center;gap:8px;padding:10px 12px;cursor:pointer;border-radius:var(--radius-sm);font-size:13px;font-weight:600;color:var(--text2);transition:all .15s}
.nav-group-header:hover{background:var(--surface2);color:var(--text)}
.nav-group-header .icon{font-size:16px;width:24px;text-align:center}
.nav-group-header .count{margin-left:auto;font-size:11px;padding:2px 8px;border-radius:10px;background:var(--surface3);color:var(--text3)}
.nav-group-header .count.has-issues{background:var(--red-bg);color:var(--red)}
.nav-group-items{display:none;padding-left:20px}
.nav-group.open .nav-group-items{display:block}
.nav-group-header .arrow{transition:transform .2s;font-size:10px}
.nav-group.open .arrow{transform:rotate(90deg)}
.nav-item{display:flex;align-items:center;gap:8px;padding:8px 12px;cursor:pointer;border-radius:var(--radius-sm);font-size:12px;color:var(--text2);transition:all .15s}
.nav-item:hover{background:var(--surface2);color:var(--text)}
.nav-item.active{background:var(--pri-bg);color:var(--pri-light)}
.nav-item .dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.dot.pass{background:var(--green)}.dot.fail{background:var(--red)}.dot.warn{background:var(--yellow)}.dot.fixed{background:var(--blue)}.dot.pending{background:var(--text3)}

/* Main area */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden}
.toolbar{display:flex;align-items:center;gap:12px;padding:12px 20px;border-bottom:1px solid var(--border);background:var(--surface);z-index:50}
.toolbar-left{display:flex;align-items:center;gap:12px}
.toolbar-center{flex:1;display:flex;justify-content:center;gap:8px}
.toolbar-right{display:flex;align-items:center;gap:8px}
.btn{padding:8px 16px;border:1px solid var(--border);background:var(--surface2);color:var(--text);border-radius:var(--radius-sm);cursor:pointer;font-size:12px;font-weight:500;transition:all .15s;display:flex;align-items:center;gap:6px}
.btn:hover{background:var(--surface3);border-color:var(--text3)}
.btn.pri{background:var(--pri);border-color:var(--pri);color:#fff}
.btn.pri:hover{background:var(--pri-light)}
.btn.sm{padding:6px 10px;font-size:11px}
.btn.icon-only{padding:8px;width:36px;height:36px;justify-content:center}
.tab-btn{padding:8px 16px;border:none;background:transparent;color:var(--text3);cursor:pointer;font-size:13px;font-weight:500;border-radius:var(--radius-sm);transition:all .15s}
.tab-btn:hover{color:var(--text);background:var(--surface2)}
.tab-btn.active{color:var(--pri-light);background:var(--pri-bg)}
.zoom-info{font-size:11px;color:var(--text3);min-width:48px;text-align:center}

/* Content area */
.content{flex:1;overflow:auto;position:relative}
.content::-webkit-scrollbar{width:8px;height:8px}
.content::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}

/* Journey view */
.journey-view{padding:40px}
.journey-section{margin-bottom:60px}
.journey-title{display:flex;align-items:center;gap:16px;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid var(--border)}
.journey-title h2{font-size:24px;font-weight:800}
.journey-title .badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}
.journey-title .badge.seller{background:var(--pri-bg);color:var(--pri-light)}
.journey-title .badge.buyer{background:var(--green-bg);color:var(--green)}
.journey-title .badge.admin{background:var(--orange-bg);color:var(--orange)}

.journey-flow{display:flex;flex-wrap:wrap;gap:20px}
.journey-step{position:relative}
.journey-step .arrow{position:absolute;right:-16px;top:50%;transform:translateY(-50%);color:var(--text3);font-size:14px}

/* Feature cards */
.feature-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;width:340px;transition:all .2s;cursor:pointer}
.feature-card:hover{border-color:var(--pri);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
.feature-card.status-pass{border-left:3px solid var(--green)}
.feature-card.status-fail{border-left:3px solid var(--red)}
.feature-card.status-warn{border-left:3px solid var(--yellow)}
.feature-card.status-fixed{border-left:3px solid var(--blue)}
.feature-card.status-pending{border-left:3px solid var(--text3)}
.card-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}
.card-header h3{font-size:15px;font-weight:700}
.card-header .step-num{font-size:11px;color:var(--text3);font-weight:600;padding:2px 8px;background:var(--surface2);border-radius:10px}
.card-status{display:flex;align-items:center;gap:6px;margin-bottom:8px}
.status-badge{padding:3px 10px;border-radius:10px;font-size:11px;font-weight:600}
.status-badge.pass{background:var(--green-bg);color:var(--green)}
.status-badge.fail{background:var(--red-bg);color:var(--red)}
.status-badge.warn{background:var(--yellow-bg);color:var(--yellow)}
.status-badge.fixed{background:var(--blue-bg);color:var(--blue)}
.status-badge.pending{background:var(--surface3);color:var(--text3)}
.card-desc{font-size:12px;color:var(--text2);line-height:1.6;margin-bottom:12px}
.card-issues{border-top:1px solid var(--border);padding-top:10px}
.issue-item{display:flex;align-items:flex-start;gap:8px;padding:6px 0;font-size:11px;color:var(--text2);line-height:1.5}
.issue-item .sev{flex-shrink:0;padding:1px 6px;border-radius:4px;font-size:10px;font-weight:700}
.sev.critical{background:var(--red-bg);color:var(--red)}
.sev.high{background:var(--orange-bg);color:var(--orange)}
.sev.medium{background:var(--yellow-bg);color:var(--yellow)}
.sev.low{background:var(--surface3);color:var(--text3)}
.card-meta{display:flex;gap:12px;margin-top:10px;padding-top:10px;border-top:1px solid var(--border)}
.card-meta span{font-size:10px;color:var(--text3)}

/* Changelog view */
.changelog-view{padding:40px;max-width:1000px;margin:0 auto}
.changelog-day{margin-bottom:40px}
.changelog-date{font-size:18px;font-weight:700;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px}
.changelog-date .count{font-size:12px;padding:2px 10px;border-radius:10px;background:var(--pri-bg);color:var(--pri-light)}
.changelog-entry{display:flex;gap:16px;padding:16px;margin-bottom:8px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);transition:all .15s}
.changelog-entry:hover{border-color:var(--pri)}
.changelog-time{font-size:12px;color:var(--text3);font-weight:500;min-width:60px;flex-shrink:0}
.changelog-content{flex:1}
.changelog-content h4{font-size:13px;font-weight:600;margin-bottom:4px}
.changelog-content p{font-size:12px;color:var(--text2);line-height:1.5}
.changelog-tags{display:flex;gap:6px;margin-top:8px;flex-wrap:wrap}
.changelog-tag{padding:2px 8px;border-radius:4px;font-size:10px;font-weight:600}
.changelog-tag.fix{background:var(--green-bg);color:var(--green)}
.changelog-tag.bug{background:var(--red-bg);color:var(--red)}
.changelog-tag.feat{background:var(--blue-bg);color:var(--blue)}
.changelog-tag.ux{background:var(--pri-bg);color:var(--pri-light)}
.changelog-tag.security{background:var(--orange-bg);color:var(--orange)}
.changelog-file{font-size:10px;color:var(--text3);margin-top:6px;font-family:'Fira Code',monospace}

/* Stats view */
.stats-view{padding:40px}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:32px}
.stat-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px}
.stat-card .label{font-size:12px;color:var(--text3);margin-bottom:8px}
.stat-card .value{font-size:32px;font-weight:800}
.stat-card .value.green{color:var(--green)}
.stat-card .value.red{color:var(--red)}
.stat-card .value.yellow{color:var(--yellow)}
.stat-card .value.blue{color:var(--blue)}
.stat-card .sub{font-size:11px;color:var(--text3);margin-top:4px}

/* Summary table */
.summary-table{width:100%;border-collapse:collapse;background:var(--surface);border-radius:var(--radius);overflow:hidden;border:1px solid var(--border)}
.summary-table th{padding:12px 16px;text-align:left;font-size:12px;font-weight:600;color:var(--text3);background:var(--surface2);border-bottom:1px solid var(--border)}
.summary-table td{padding:10px 16px;font-size:12px;border-bottom:1px solid var(--border)}
.summary-table tr:last-child td{border-bottom:none}
.summary-table tr:hover td{background:var(--surface2)}

/* Detail modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s}
.modal-overlay.active{opacity:1;pointer-events:auto}
.modal{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);width:90%;max-width:700px;max-height:85vh;overflow-y:auto;padding:32px}
.modal::-webkit-scrollbar{width:4px}
.modal::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}
.modal h2{font-size:20px;font-weight:800;margin-bottom:8px}
.modal .close{position:absolute;top:16px;right:16px;background:none;border:none;color:var(--text3);cursor:pointer;font-size:20px}

/* Responsive */
@media(max-width:768px){
  .sidebar{position:fixed;left:0;top:0;bottom:0;z-index:200}
  .sidebar.collapsed{transform:translateX(-320px)}
  .feature-card{width:100%}
  .journey-flow{flex-direction:column}
}

/* Print */
@media print{
  .sidebar,.toolbar{display:none!important}
  .content{overflow:visible!important}
  .feature-card{break-inside:avoid;page-break-inside:avoid}
  body{background:#fff;color:#000}
}

/* Animations */
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.feature-card{animation:fadeIn .3s ease}
</style>
</head>
<body>
<div class="app" id="app">
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h1>Whistle AI QA Dashboard</h1>
      <p>Service Journey Map & Audit Trail</p>
    </div>
    <div class="sidebar-search">
      <input type="text" placeholder="Search features, issues..." id="searchInput" oninput="filterNav(this.value)">
    </div>
    <nav class="sidebar-nav" id="sidebarNav"></nav>
    <div style="padding:16px;border-top:1px solid var(--border)">
      <div style="font-size:11px;color:var(--text3);display:flex;justify-content:space-between">
        <span>Last updated</span><span id="lastUpdated"></span>
      </div>
    </div>
  </aside>

  <!-- Main -->
  <main class="main">
    <div class="toolbar">
      <div class="toolbar-left">
        <button class="btn icon-only" onclick="toggleSidebar()" title="Toggle sidebar">&#9776;</button>
        <span style="font-size:14px;font-weight:700" id="viewTitle">Overview</span>
      </div>
      <div class="toolbar-center">
        <button class="tab-btn active" data-view="overview" onclick="switchView('overview',this)">Overview</button>
        <button class="tab-btn" data-view="seller" onclick="switchView('seller',this)">Seller Journey</button>
        <button class="tab-btn" data-view="buyer" onclick="switchView('buyer',this)">Buyer Journey</button>
        <button class="tab-btn" data-view="admin" onclick="switchView('admin',this)">Admin Journey</button>
        <button class="tab-btn" data-view="database" onclick="switchView('database',this)">Database</button>
        <button class="tab-btn" data-view="changelog" onclick="switchView('changelog',this)">Changelog</button>
      </div>
      <div class="toolbar-right">
        <button class="btn sm" onclick="expandAll()">Expand All</button>
        <button class="btn sm" onclick="collapseAll()">Collapse All</button>
        <button class="btn sm pri" onclick="window.print()">Export</button>
      </div>
    </div>
    <div class="content" id="content"></div>
  </main>
</div>

<!-- Modal -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal" id="modalContent"></div>
</div>

<script>
// =====================================================
// DATA â€” All journey steps, features, issues, changelog
// =====================================================
var DATA = {
  meta: {
    project: 'Whistle AI',
    description: 'AI-powered Export Management SaaS for Korean Manufacturers',
    version: '1.0.0',
    lastAudit: new Date().toISOString(),
    files: [
      {name:'whistle-landing.html', size:'134KB', role:'Seller Landing'},
      {name:'buyer-landing.html', size:'145KB', role:'Buyer Landing'},
      {name:'whistle.html', size:'533KB', role:'Seller App'},
      {name:'buyer.html', size:'158KB', role:'Buyer Portal'},
      {name:'admin.html', size:'186KB', role:'Admin Dashboard'}
    ]
  },

  // SELLER JOURNEY
  seller: {
    label: 'Seller Journey (ì œì¡°ì‚¬ ì—¬ì •)',
    icon: 'ğŸ­',
    badge: 'seller',
    steps: [
      {
        id:'s-landing', name:'Landing Page', nameKo:'ëœë”© í˜ì´ì§€', file:'whistle-landing.html',
        desc:'ì„œë¹„ìŠ¤ ì†Œê°œ, ê¸°ëŠ¥ ì‡¼ì¼€ì´ìŠ¤, ê°€ê²© ì •ì±…, íšŒì›ê°€ì…/ë¡œê·¸ì¸',
        status:'pass',
        features:['Hero ì„¹ì…˜ + CTA','ê¸°ëŠ¥ ì†Œê°œ ìŠ¬ë¼ì´ë“œ','ê°€ê²© í”Œëœ 3ì¢…(Free/Starter/Pro)','ê³ ê° í›„ê¸°','FAQ ì•„ì½”ë””ì–¸','ë¬´ë£Œ AI ë¶„ì„ ì²´í—˜','íšŒì›ê°€ì… ëª¨ë‹¬(ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸)','ë¡œê·¸ì¸ ëª¨ë‹¬','ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'24:00',type:'security',text:'ì±„íŒ… ìœ„ì ¯ esc()ì— & ë° > ì´ìŠ¤ì¼€ì´í•‘ ì¶”ê°€, bubble() í…ìŠ¤íŠ¸ ì´ìŠ¤ì¼€ì´í•‘ ì¶”ê°€',commit:'audit-fix'},
          {date:'2026-02-28',time:'24:00',type:'fix',text:'companies insert ì»¬ëŸ¼ëª… ìˆ˜ì •: nameâ†’name_ko, contact_nameâ†’ceo_name_ko, product_categoriesâ†’category',commit:'audit-fix'}
        ]
      },
      {
        id:'s-signup', name:'Signup & Auth', nameKo:'íšŒì›ê°€ì…/ì¸ì¦', file:'whistle-landing.html',
        desc:'ì´ë©”ì¼ ê¸°ë°˜ íšŒì›ê°€ì…, ì—­í•  ì„ íƒ(ì œì¡°ì‚¬/ë°”ì´ì–´), ì´ìš©ì•½ê´€ ë™ì˜, Supabase Auth',
        status:'pass',
        features:['ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ê°€ì…','ì—­í•  ì„ íƒ (ì œì¡°ì‚¬/ë°”ì´ì–´)','ì´ìš©ì•½ê´€ ë™ì˜ ì²´í¬ë°•ìŠ¤','íšŒì‚¬ëª…/ë‹´ë‹¹ìëª…/ì—°ë½ì²˜ ìˆ˜ì§‘','users í…Œì´ë¸” ìƒì„± + companies í…Œì´ë¸” ìƒì„±','ê°€ì… í›„ whistle.html ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'24:00',type:'fix',text:'companies insert ì»¬ëŸ¼ëª… ìˆ˜ì •: nameâ†’name_ko, contact_nameâ†’ceo_name_ko, product_categoriesâ†’category',commit:'audit-fix'},
          {date:'2026-02-28',time:'17:05',type:'fix',text:'ê°€ì… ì‹œ users í…Œì´ë¸” row ë¯¸ìƒì„± â†’ upsert ì¶”ê°€ (CRITICAL)',commit:'d022591'},
          {date:'2026-02-28',time:'17:05',type:'fix',text:'ì´ìš©ì•½ê´€ ë™ì˜ ì²´í¬ë°•ìŠ¤ ì¶”ê°€ (AUTH-001)',commit:'6e05175'},
          {date:'2026-02-28',time:'17:05',type:'fix',text:'ë¬´ë£Œ ë¶„ì„ íšŸìˆ˜ "1íšŒ" â†’ "3íšŒ" í†µì¼',commit:'6e05175'}
        ]
      },
      {
        id:'s-onboard', name:'Onboarding', nameKo:'ì˜¨ë³´ë”©', file:'whistle.html',
        desc:'ì²« ë¡œê·¸ì¸ í›„ íšŒì‚¬ ì •ë³´ ì„¤ì •, ë¹„ì¦ˆë‹ˆìŠ¤ ì •ë³´ ì…ë ¥, ëŒ€ì‹œë³´ë“œ ì•ˆë‚´',
        status:'pass',
        features:['íšŒì‚¬ ì •ë³´ í™•ì¸/ìˆ˜ì •','ì‚¬ì—… ìœ í˜• ì„ íƒ','ì£¼ìš” ìˆ˜ì¶œ í’ˆëª© ì„¤ì •','íƒ€ê²Ÿ ì‹œì¥ ì„ íƒ','ì˜¨ë³´ë”© ì™„ë£Œ í›„ ëŒ€ì‹œë³´ë“œ'],
        issues:[
          {sev:'low',text:'ëœë”©ì—ì„œ ì…ë ¥í•œ íšŒì‚¬ëª…ì´ ì˜¨ë³´ë”©ì—ì„œ ìë™ ì±„ì›Œì§€ì§€ ì•ŠìŒ â€” ì¤‘ë³µ ì…ë ¥ ë°œìƒ'}
        ],
        history:[
          {date:'2026-02-28',time:'24:00',type:'fix',text:'ì˜¨ë³´ë”© íšŒì‚¬ì •ë³´ ì €ì¥ ì‹œ ceo_name â†’ ceo_name_ko ì»¬ëŸ¼ëª… ìˆ˜ì •',commit:'audit-fix'}
        ]
      },
      {
        id:'s-dashboard', name:'Dashboard', nameKo:'ëŒ€ì‹œë³´ë“œ', file:'whistle.html',
        desc:'ì „ì²´ í˜„í™© ìš”ì•½: í”„ë¡œì íŠ¸, ë°”ì´ì–´, ì£¼ë¬¸, AI ë¶„ì„, ìµœê·¼ í™œë™, ë¹ ë¥¸ ì‘ì—…',
        status:'pass',
        features:['í†µê³„ ì¹´ë“œ (í”„ë¡œì íŠ¸/ë°”ì´ì–´/ì£¼ë¬¸/ë§¤ì¶œ)','ìµœê·¼ í™œë™ íƒ€ì„ë¼ì¸','ë¹ ë¥¸ ì‘ì—… ë²„íŠ¼','í™˜ìœ¨ ì •ë³´ í‘œì‹œ','í”Œëœ ì •ë³´ í‘œì‹œ','ê°€ì´ë“œì„¼í„° ë§í¬'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:49',type:'fix',text:'ë¹ˆ í™œë™ íƒ€ì„ë¼ì¸ì— CTA ë²„íŠ¼ ì¶”ê°€',commit:'a6c4a2e'},
          {date:'2026-02-28',time:'22:49',type:'fix',text:'loadExchangeRateë¥¼ _relayReadyì— ë˜í•‘',commit:'9831e85'}
        ]
      },
      {
        id:'s-projects', name:'Projects', nameKo:'í”„ë¡œì íŠ¸ ê´€ë¦¬', file:'whistle.html',
        desc:'ìˆ˜ì¶œ í”„ë¡œì íŠ¸ ìƒì„±/ê´€ë¦¬: ë°”ì´ì–´ ë°°ì •, ìƒíƒœ ì¶”ì , íƒ€ì„ë¼ì¸, ë¬¸ì„œ ì—°ê²°',
        status:'pass',
        features:['í”„ë¡œì íŠ¸ CRUD','ë°”ì´ì–´ ì—°ê²°','ìƒíƒœ ê´€ë¦¬ (ì¤€ë¹„/ì§„í–‰/ì™„ë£Œ)','í”„ë¡œì íŠ¸ë³„ ë¬¸ì„œ ëª©ë¡','í”„ë¡œì íŠ¸ë³„ ì±„íŒ…','í”„ë¡œì íŠ¸ ì‚­ì œ í™•ì¸'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:48',type:'ux',text:'í”„ë¡œì íŠ¸ ì‚­ì œ í™•ì¸ ë©”ì‹œì§€ ê°œì„ ',commit:'d022591'}
        ]
      },
      {
        id:'s-products', name:'Products', nameKo:'ì œí’ˆ ê´€ë¦¬', file:'whistle.html',
        desc:'ìˆ˜ì¶œ ì œí’ˆ ë“±ë¡: ì œí’ˆëª…, ì„¤ëª…, ì¹´í…Œê³ ë¦¬, ê°€ê²©, ì´ë¯¸ì§€, ì¸ì¦ ì •ë³´',
        status:'pass',
        features:['ì œí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ','ì´ë¯¸ì§€ ì—…ë¡œë“œ (Supabase Storage)','ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜','ê°€ê²©/MOQ/ë¦¬ë“œíƒ€ì„ ì„¤ì •','ì¸ì¦ ì •ë³´ ê´€ë¦¬','ì œí’ˆ ëª©ë¡ ê²€ìƒ‰/í•„í„°'],
        issues:[],
        history:[]
      },
      {
        id:'s-buyers', name:'Buyers', nameKo:'ë°”ì´ì–´ ê´€ë¦¬', file:'whistle.html',
        desc:'ë°”ì´ì–´ ì—°ë½ì²˜ ê´€ë¦¬, ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì´ë ¥, ë“±ê¸‰ ë¶„ë¥˜',
        status:'pass',
        features:['ë°”ì´ì–´ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ','êµ­ê°€/ë“±ê¸‰/ìƒíƒœ ë¶„ë¥˜','ì—°ë½ì²˜ ì •ë³´','ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì´ë ¥','ë°”ì´ì–´ë³„ ì£¼ë¬¸ ëª©ë¡'],
        issues:[],
        history:[]
      },
      {
        id:'s-analysis', name:'AI Analysis', nameKo:'AI ë¶„ì„', file:'whistle.html',
        desc:'AI ê¸°ë°˜ ì‹œì¥ ë¶„ì„: URL ë¶„ì„, ì´ë¯¸ì§€ ë¶„ì„, ìˆ˜ë™ ë¶„ì„, ë³´ê³ ì„œ ìƒì„±',
        status:'warn',
        features:['URL ì…ë ¥ ë¶„ì„ (ì‹œì¥/ê²½ìŸì‚¬)','ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¶„ì„','ìˆ˜ë™ ë°ì´í„° ì…ë ¥ ë¶„ì„','AI ë³´ê³ ì„œ ìƒì„± (PDF)','ë¶„ì„ ì´ë ¥ ê´€ë¦¬','ë¬´ë£Œ 3íšŒ/ì›” ì œí•œ'],
        issues:[
          {sev:'medium',text:'ë¦´ë ˆì´ ì„œë²„ ë¯¸ì—°ê²° ì‹œ í´ë°± ë¶„ì„ì— ê²½ê³  ë°°ë„ˆ ì—†ìŒ'},
          {sev:'low',text:'ë¶„ì„ ì§„í–‰ ì¤‘ ë‹¤ë¥¸ íƒ­ ì´ë™ ì‹œ ê²°ê³¼ ì•Œë¦¼ ì—†ìŒ'}
        ],
        history:[
          {date:'2026-02-28',time:'22:49',type:'fix',text:'FREE_SEARCH_LIMIT 99â†’3 ë³€ê²½',commit:'6e05175'}
        ]
      },
      {
        id:'s-documents', name:'Documents', nameKo:'ì„œë¥˜ ê´€ë¦¬', file:'whistle.html',
        desc:'ìˆ˜ì¶œ ì„œë¥˜ ìë™ ìƒì„±: PI, CI, PL, BL ë“±. PDF ë‹¤ìš´ë¡œë“œ, ì´ë©”ì¼ ë°œì†¡',
        status:'pass',
        features:['PI (Proforma Invoice) ìƒì„±','CI (Commercial Invoice) ìƒì„±','PL (Packing List) ìƒì„±','BL (Bill of Lading) ìƒì„±','PDF ë‹¤ìš´ë¡œë“œ (í•œê¸€ í°íŠ¸ ì§€ì›)','ì´ë©”ì¼ ì²¨ë¶€ ë°œì†¡','ì„œë¥˜ ë²ˆí˜¸ ìë™ ìƒì„±','ì„œë¥˜ ì´ë ¥ ê´€ë¦¬'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'24:00',type:'fix',text:'documents insert ì‹œ dataâ†’content ì»¬ëŸ¼ëª… ìˆ˜ì •, buyer_nameâ†’buyer_idë¡œ ë³€ê²½',commit:'audit-fix'},
          {date:'2026-02-28',time:'24:00',type:'fix',text:'documents read ì½”ë“œì—ì„œ doc.data ëŒ€ì‹  doc.content ìš°ì„  ì°¸ì¡°í•˜ë„ë¡ ìˆ˜ì •',commit:'audit-fix'},
          {date:'2026-02-28',time:'22:49',type:'fix',text:'PIâ†’ì£¼ë¬¸ ì „í™˜ ì‹œ ë°ì´í„° ê²½ë¡œ ìˆ˜ì • (c.ref.* ìš°ì„ )',commit:'b8181dc'},
          {date:'2026-02-27',type:'fix',text:'jsPDF í•œê¸€ ê¹¨ì§ ìˆ˜ì • (NanumGothic ì„ë² ë“œ)',commit:'DOC-001'}
        ]
      },
      {
        id:'s-orders', name:'Orders', nameKo:'ì£¼ë¬¸ ê´€ë¦¬', file:'whistle.html',
        desc:'ì£¼ë¬¸ ìƒì„±/ê´€ë¦¬, ìƒíƒœ ì¶”ì , ê²°ì œ ì¡°ê±´, ë°°ì†¡ ì •ë³´',
        status:'pass',
        features:['ì£¼ë¬¸ ëª©ë¡/ìƒì„¸','PIì—ì„œ ì£¼ë¬¸ ì „í™˜','ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬','ê²°ì œ ì¡°ê±´ (T/T, L/C ë“±)','ì¸ì½”í…€ì¦ˆ ì„¤ì •','ì£¼ë¬¸ë³„ ë¬¸ì„œ ì—°ê²°','CSV ë‚´ë³´ë‚´ê¸°'],
        issues:[],
        history:[]
      },
      {
        id:'s-email', name:'Email', nameKo:'ì´ë©”ì¼', file:'whistle.html',
        desc:'ë°”ì´ì–´ì—ê²Œ ì´ë©”ì¼ ë°œì†¡, í…œí”Œë¦¿, ë°œì†¡ ì´ë ¥ ê´€ë¦¬',
        status:'warn',
        features:['ì´ë©”ì¼ ì‘ì„±/ë°œì†¡','í…œí”Œë¦¿ (ì¸ì‚¬/ì œí’ˆì†Œê°œ/ê²¬ì  ë“±)','ì²¨ë¶€ íŒŒì¼','ë°œì†¡ ì´ë ¥ ì¡°íšŒ','AI ì´ë©”ì¼ ì´ˆì•ˆ ìƒì„±'],
        issues:[
          {sev:'high',text:'ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ì€ ë¦´ë ˆì´ ì„œë²„ APIí‚¤ ì„¤ì • í•„ìš” â€” ë¯¸ì„¤ì • ì‹œ mailto: í•¸ë“¤ëŸ¬ë¡œ ì—´ë¦¼'},
          {sev:'medium',text:'ë°œì†¡ ì‹¤íŒ¨ ì‹œì—ë„ ë¡œê·¸ì— "sent"ë¡œ ê¸°ë¡ë  ìˆ˜ ìˆìŒ'}
        ],
        history:[
          {date:'2026-02-27',type:'fix',text:'ì´ë©”ì¼ ë¡œê·¸ ìƒíƒœë¥¼ ì‹¤ì œ ë°œì†¡ ì—¬ë¶€ì— ë”°ë¼ ì •í™•íˆ ê¸°ë¡',commit:'EMAIL-001'}
        ]
      },
      {
        id:'s-chat', name:'Chat', nameKo:'ì±„íŒ…', file:'whistle.html',
        desc:'ë°”ì´ì–´ì™€ ì‹¤ì‹œê°„ ì±„íŒ…, íŒŒì¼ ê³µìœ , ì½ìŒ í™•ì¸',
        status:'pass',
        features:['ì‹¤ì‹œê°„ ë©”ì‹œì§€ (Supabase Realtime)','íŒŒì¼ ì—…ë¡œë“œ/ê³µìœ ','ë°”ì´ì–´ë³„ ëŒ€í™” ëª©ë¡','ì½ìŒ í™•ì¸','ì±„íŒ… ì•Œë¦¼','ë¡œê·¸ì•„ì›ƒ ì‹œ ì±„ë„ ì •ë¦¬'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:48',type:'fix',text:'Realtime ì±„ë„ ë¡œê·¸ì•„ì›ƒ ì‹œ ì •ë¦¬',commit:'d022591'},
          {date:'2026-02-28',time:'22:49',type:'security',text:'ì±„íŒ… ë“œë˜ê·¸ì•¤ë“œë¡­ íŒŒì¼ ìœ í˜• ê²€ì¦ ì¶”ê°€',commit:'9831e85'},
          {date:'2026-02-28',time:'22:49',type:'fix',text:'í”Œë¡œíŒ… ì±„íŒ… HTML ì´ìŠ¤ì¼€ì´í•‘ ì™„ì„±',commit:'9831e85'}
        ]
      },
      {
        id:'s-marketplace', name:'Marketplace', nameKo:'ë§ˆì¼“í”Œë ˆì´ìŠ¤', file:'whistle.html',
        desc:'ë°”ì´ì–´ ìš”ì²­ ë¸Œë¼ìš°ì§•, ì œì•ˆ ì œì¶œ, ë§¤ì¹­ ê´€ë¦¬',
        status:'pass',
        features:['ë°”ì´ì–´ ìš”ì²­ ëª©ë¡ ì¡°íšŒ','ì¹´í…Œê³ ë¦¬/êµ­ê°€ í•„í„°','ì œì•ˆì„œ ì‘ì„±/ì œì¶œ','ì œì•ˆ ìƒíƒœ ì¶”ì ','ë§¤ì¹­ ì•Œë¦¼'],
        issues:[],
        history:[]
      },
      {
        id:'s-alibaba', name:'Alibaba', nameKo:'ì•Œë¦¬ë°”ë°” ê´€ë¦¬', file:'whistle.html',
        desc:'ì•Œë¦¬ë°”ë°” ìŠ¤í† ì–´ ì„¤ì •, ì œí’ˆ ë“±ë¡ ê°€ì´ë“œ, ì¸ì½°ì´ì–´ë¦¬ ê´€ë¦¬',
        status:'warn',
        features:['ìŠ¤í† ì–´ ì •ë³´ ì„¤ì •','ì œí’ˆ ë“±ë¡ ì›Œí¬í”Œë¡œìš°','ì¸ì½°ì´ì–´ë¦¬ ëª©ë¡','í”„ë¡œì íŠ¸ ìƒì„± ê°€ì´ë“œ'],
        issues:[
          {sev:'medium',text:'API ì—°ë™ íƒ­ì€ "ì¤€ë¹„ì¤‘"ìœ¼ë¡œ í‘œì‹œë¨ â€” ì‹¤ì œ API ë¯¸ì—°ë™'}
        ],
        history:[
          {date:'2026-02-27',type:'fix',text:'ì•Œë¦¬ë°”ë°” API íƒ­ "ì¤€ë¹„ì¤‘" ëª…ì‹œ',commit:'ALI-001'},
          {date:'2026-02-28',time:'22:49',type:'ux',text:'ì•Œë¦¬ë°”ë°” ìŠ¤í† ì–´ ì‚­ì œ í™•ì¸ ë©”ì‹œì§€ ê°œì„ ',commit:'d022591'}
        ]
      },
      {
        id:'s-voucher', name:'Voucher', nameKo:'ë°”ìš°ì²˜ ê´€ë¦¬', file:'whistle.html',
        desc:'ì •ë¶€ ìˆ˜ì¶œë°”ìš°ì²˜ ì‚¬ìš© ë‚´ì—­ ì¶”ì , ë¦¬í¬íŠ¸ ìƒì„±',
        status:'pass',
        features:['ë°”ìš°ì²˜ í™œë™ ê¸°ë¡','ì›”ë³„ ì‚¬ìš© ë‚´ì—­','PDF ë¦¬í¬íŠ¸ ìƒì„±','ë°”ìš°ì²˜ ì”ì•¡ í‘œì‹œ'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:49',type:'ux',text:'ë°”ìš°ì²˜ ê°€ê²© í‹¸ë“œ(~) ì œê±°',commit:'a6c4a2e'}
        ]
      },
      {
        id:'s-settings', name:'Settings', nameKo:'ì„¤ì •', file:'whistle.html',
        desc:'íšŒì‚¬ ì •ë³´, í”„ë¡œí•„, í”Œëœ/ê²°ì œ, ì•Œë¦¼ ì„¤ì •',
        status:'warn',
        features:['íšŒì‚¬ ì •ë³´ ìˆ˜ì •','í”„ë¡œí•„ ìˆ˜ì •','í”Œëœ ë³€ê²½ (Freeâ†’Starterâ†’Pro)','ê²°ì œ (Toss Payments)','ì•Œë¦¼ ì„¤ì •','ë¡œê·¸ì•„ì›ƒ'],
        issues:[
          {sev:'critical',text:'Toss Payments í´ë¼ì´ì–¸íŠ¸ í‚¤ê°€ "REPLACE" í”Œë ˆì´ìŠ¤í™€ë” â€” ê²°ì œ ë¶ˆê°€'},
          {sev:'critical',text:'Stripe publishable í‚¤ê°€ "REPLACE" í”Œë ˆì´ìŠ¤í™€ë” â€” ê²°ì œ ë¶ˆê°€'}
        ],
        history:[
          {date:'2026-02-28',time:'22:49',type:'ux',text:'í”Œëœ ë‹¤ìš´ê·¸ë ˆì´ë“œ í™•ì¸ ë©”ì‹œì§€ì— ìƒëŠ” ê¸°ëŠ¥ ëª©ë¡ ì¶”ê°€',commit:'a6c4a2e'}
        ]
      },
      {
        id:'s-notifications', name:'Notifications', nameKo:'ì•Œë¦¼', file:'whistle.html',
        desc:'ì¸ì•± ì•Œë¦¼ ì„¼í„°: ìƒˆ ë©”ì‹œì§€, ë§¤ì¹­, ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ ë“±',
        status:'pass',
        features:['ì•Œë¦¼ íŒ¨ë„','ì½ìŒ/ì•ˆì½ìŒ í‘œì‹œ','ì•Œë¦¼ í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ ì´ë™','ì•Œë¦¼ ì „ì²´ ì½ìŒ'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:48',type:'security',text:'ì•Œë¦¼ title/body XSS ë°©ì§€ (U.esc ì ìš©)',commit:'d022591'}
        ]
      },
      {
        id:'s-guide', name:'Guide Center', nameKo:'ê°€ì´ë“œì„¼í„°', file:'whistle.html',
        desc:'ìˆ˜ì¶œ ê°€ì´ë“œ, ì‚°ì—…ë³„/êµ­ê°€ë³„ ê°€ì´ë“œ, ìš©ì–´ì‚¬ì „, ë°•ëŒíšŒ ì •ë³´',
        status:'pass',
        features:['ìˆ˜ì¶œ ì ˆì°¨ ê°€ì´ë“œ','ì‚°ì—…ë³„ ê°€ì´ë“œ (ë·°í‹°, ì‹í’ˆ, ê±´ê°•)','êµ­ê°€ë³„ ê°€ì´ë“œ (ë¯¸êµ­, EU, ì¼ë³¸, ì¤‘êµ­)','ìˆ˜ì¶œ ìš©ì–´ì‚¬ì „','ë°•ëŒíšŒ ì¼ì •/ì¶”ì²œ','ê°€ì´ë“œ ê²€ìƒ‰/í•„í„°'],
        issues:[],
        history:[
          {date:'2026-02-28',type:'feat',text:'ê°€ì´ë“œì„¼í„° ì „ì²´ ì½˜í…ì¸  ë„ì…',commit:'0357cb2'}
        ]
      }
    ]
  },

  // BUYER JOURNEY
  buyer: {
    label: 'Buyer Journey (ë°”ì´ì–´ ì—¬ì •)',
    icon: 'ğŸ›’',
    badge: 'buyer',
    steps: [
      {
        id:'b-landing', name:'Landing Page', nameKo:'ëœë”© í˜ì´ì§€', file:'buyer-landing.html',
        desc:'ë°”ì´ì–´ìš© ì„œë¹„ìŠ¤ ì†Œê°œ, í•œêµ­ ì œí’ˆ ê²€ìƒ‰ ì²´í—˜, ê°€ì…/ë¡œê·¸ì¸',
        status:'pass',
        features:['Hero + CTA','í•œêµ­ ì œí’ˆ ê²€ìƒ‰ ì²´í—˜ (Naver API)','ê°€ê²© í”Œëœ (Free/Starter/Pro)','K-Beauty/K-Food ì‡¼ì¼€ì´ìŠ¤','FAQ','íšŒì›ê°€ì…/ë¡œê·¸ì¸ ëª¨ë‹¬'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'24:00',type:'security',text:'XSS ì·¨ì•½ì  ìˆ˜ì • â€” dangerouslySetInnerHTMLë¡œ Naver ìƒí’ˆ ì œëª© ë¯¸ì´ìŠ¤ì¼€ì´í”„ ë Œë”ë§ í•´ê²°',commit:'audit-fix'},
          {date:'2026-02-28',time:'24:00',type:'security',text:'ì±„íŒ… ìœ„ì ¯ esc()ì— & ë° > ì´ìŠ¤ì¼€ì´í•‘ ì¶”ê°€, bubble() í…ìŠ¤íŠ¸ ì´ìŠ¤ì¼€ì´í•‘ ì¶”ê°€',commit:'audit-fix'},
          {date:'2026-02-28',time:'22:41',type:'fix',text:'FREE_SEARCH_LIMIT 99â†’3 ìˆ˜ì •',commit:'6e05175'},
          {date:'2026-02-28',time:'22:41',type:'fix',text:'ì„œë²„ ë””ë²„ê·¸ ë©”ì‹œì§€ ì‚¬ìš©ì ë…¸ì¶œ ì œê±°',commit:'6e05175'},
          {date:'2026-02-28',time:'22:41',type:'ux',text:'EN ë²ˆì—­ ê°œì„  (Naver ì°¸ì¡° ì œê±°)',commit:'a6c4a2e'}
        ]
      },
      {
        id:'b-signup', name:'Signup', nameKo:'íšŒì›ê°€ì…', file:'buyer-landing.html',
        desc:'ë°”ì´ì–´ íšŒì›ê°€ì…, ì—­í•  ìë™ ì„¤ì • (buyer)',
        status:'pass',
        features:['ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ê°€ì…','íšŒì‚¬ëª…/ì´ë¦„ ìˆ˜ì§‘','role=buyer ìë™ ì„¤ì •','buyer.html ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸'],
        issues:[],
        history:[
          {date:'2026-02-28',type:'fix',text:'ëœë”© ê°€ì… ì‹œ role=buyer ì„¤ì • ìˆ˜ì • (BUYER-001)',commit:'6e05175'}
        ]
      },
      {
        id:'b-search', name:'Product Search', nameKo:'ì œí’ˆ ê²€ìƒ‰', file:'buyer.html',
        desc:'í•œêµ­ ì´ì»¤ë¨¸ìŠ¤ ë§ˆì¼“í”Œë ˆì´ìŠ¤ì—ì„œ ì œí’ˆ ê²€ìƒ‰, í•„í„°ë§, ì •ë ¬',
        status:'pass',
        features:['í‚¤ì›Œë“œ ê²€ìƒ‰','ì¹´í…Œê³ ë¦¬ í•„í„°','ê°€ê²© ë²”ìœ„ í•„í„°','ì •ë ¬ (ê´€ë ¨ë„/ê°€ê²©/ì¸ê¸°)','ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ë„¤ì´ì…˜','ì œí’ˆ ìƒì„¸ ë³´ê¸°'],
        issues:[
          {sev:'low',text:'KRW ê°€ê²© ì˜† USD í™˜ì‚° ë¯¸í‘œì‹œ'}
        ],
        history:[
          {date:'2026-02-28',time:'24:00',type:'security',text:'PostgREST í•„í„° ì¸ì ì…˜ ì·¨ì•½ì  ìˆ˜ì • â€” ê²€ìƒ‰ ì¿¼ë¦¬ ë¯¸ì„¸ë‹ˆíƒ€ì´ì¦ˆ í•´ê²°',commit:'audit-fix'},
          {date:'2026-02-28',time:'24:00',type:'fix',text:'ê²€ìƒ‰ ê²°ê³¼ ì œëª© HTML íƒœê·¸(<b>) ì”ì¡´ ë¬¸ì œ í•´ê²°',commit:'audit-fix'}
        ]
      },
      {
        id:'b-save', name:'Saved Products', nameKo:'ì°œ ëª©ë¡', file:'buyer.html',
        desc:'ê´€ì‹¬ ì œí’ˆ ì €ì¥, ê´€ë¦¬, ë‚´ë³´ë‚´ê¸°',
        status:'pass',
        features:['ì œí’ˆ ì €ì¥/ì œê±°','ì €ì¥ ëª©ë¡ ì¡°íšŒ','ì œí’ˆ ë¹„êµ','ë¬¸ì˜ ë°”ë¡œê°€ê¸°'],
        issues:[],
        history:[]
      },
      {
        id:'b-inquiry', name:'Inquiry', nameKo:'ë¬¸ì˜í•˜ê¸°', file:'buyer.html',
        desc:'ì…€ëŸ¬ì—ê²Œ ì œí’ˆ ë¬¸ì˜, ê²¬ì  ìš”ì²­',
        status:'pass',
        features:['ë¬¸ì˜ í¼ (ì œí’ˆ/ìˆ˜ëŸ‰/ëª©ì )','íŒŒì¼ ì²¨ë¶€','ë¬¸ì˜ ì´ë ¥ ì¡°íšŒ','ë¬¸ì˜ ìƒíƒœ ì¶”ì '],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:49',type:'fix',text:'ë¬¸ì˜ í¼ ì´ì¤‘ ì œì¶œ ë°©ì§€ ê°€ë“œ ì¶”ê°€',commit:'9831e85'}
        ]
      },
      {
        id:'b-chat', name:'Chat', nameKo:'ì±„íŒ…', file:'buyer.html',
        desc:'ì…€ëŸ¬ì™€ ì‹¤ì‹œê°„ ì±„íŒ…',
        status:'pass',
        features:['ì‹¤ì‹œê°„ ë©”ì‹œì§€','íŒŒì¼ ê³µìœ ','ëŒ€í™” ëª©ë¡','ì•Œë¦¼'],
        issues:[],
        history:[]
      },
      {
        id:'b-marketplace', name:'Marketplace', nameKo:'ë§ˆì¼“í”Œë ˆì´ìŠ¤', file:'buyer.html',
        desc:'ì†Œì‹± ìš”ì²­ ë“±ë¡, ì…€ëŸ¬ ì œì•ˆ ê²€í† , ë§¤ì¹­',
        status:'pass',
        features:['ì†Œì‹± ìš”ì²­ ë“±ë¡ (RFQ)','ì¹´í…Œê³ ë¦¬/ìˆ˜ëŸ‰/ì˜ˆì‚° ì„¤ì •','ì…€ëŸ¬ ì œì•ˆ ëª©ë¡','ì œì•ˆ ìˆ˜ë½/ê±°ì ˆ','ë§¤ì¹­ ìƒíƒœ ì¶”ì '],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:48',type:'ux',text:'ì œì•ˆ ìˆ˜ë½/ê±°ì ˆ í™•ì¸ ë©”ì‹œì§€ ìƒì„¸í™”',commit:'d022591'}
        ]
      },
      {
        id:'b-profile', name:'Profile & Settings', nameKo:'í”„ë¡œí•„/ì„¤ì •', file:'buyer.html',
        desc:'í”„ë¡œí•„ ê´€ë¦¬, ì•Œë¦¼ ì„¤ì •, í”Œëœ ê´€ë¦¬',
        status:'warn',
        features:['í”„ë¡œí•„ ìˆ˜ì •','íšŒì‚¬ ì •ë³´','í”Œëœ ë³€ê²½','Stripe ê²°ì œ','ë¡œê·¸ì•„ì›ƒ'],
        issues:[
          {sev:'critical',text:'Stripe publishable í‚¤ "REPLACE" í”Œë ˆì´ìŠ¤í™€ë” â€” ê²°ì œ ë¶ˆê°€'}
        ],
        history:[]
      }
    ]
  },

  // ADMIN JOURNEY
  admin: {
    label: 'Admin Journey (ê´€ë¦¬ì ì—¬ì •)',
    icon: 'âš™ï¸',
    badge: 'admin',
    steps: [
      {
        id:'a-login', name:'Login', nameKo:'ë¡œê·¸ì¸', file:'admin.html',
        desc:'ê´€ë¦¬ì ë¡œê·¸ì¸, ì´ì¤‘ ì œì¶œ ë°©ì§€',
        status:'pass',
        features:['ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸','ì´ì¤‘ ì œì¶œ ë°©ì§€','ì„¸ì…˜ ê´€ë¦¬ (onAuthStateChange)','ë¡œê·¸ì•„ì›ƒ í™•ì¸'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:53',type:'fix',text:'ì´ì¤‘ ë¡œê·¸ì¸ ê°€ë“œ ì¶”ê°€',commit:'d022591'},
          {date:'2026-02-28',time:'22:53',type:'fix',text:'onAuthStateChange ì¶”ê°€',commit:'d022591'}
        ]
      },
      {
        id:'a-dashboard', name:'Dashboard', nameKo:'ëŒ€ì‹œë³´ë“œ', file:'admin.html',
        desc:'ì „ì²´ í”Œë«í¼ í˜„í™©: ì‚¬ìš©ì/ì£¼ë¬¸/ë§¤ì¶œ/ì„œë¹„ìŠ¤ìš”ì²­ í†µê³„',
        status:'pass',
        features:['í†µê³„ ì¹´ë“œ (ì´ ì‚¬ìš©ì/ì…€ëŸ¬/ë°”ì´ì–´/ì£¼ë¬¸)','ë§¤ì¶œ ì°¨íŠ¸','ìµœê·¼ ì„œë¹„ìŠ¤ ìš”ì²­','ìµœê·¼ ë©”ì‹œì§€','ê¸´ê¸‰ ì•Œë¦¼'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'22:53',type:'ux',text:'"ì•Œìˆ˜ì—†ìŒ" â†’ "ì•Œ ìˆ˜ ì—†ìŒ" ë„ì–´ì“°ê¸° ìˆ˜ì •',commit:'a6c4a2e'}
        ]
      },
      {
        id:'a-users', name:'User Management', nameKo:'ì‚¬ìš©ì ê´€ë¦¬', file:'admin.html',
        desc:'ì „ì²´ ì‚¬ìš©ì ëª©ë¡, ìƒì„¸ ì •ë³´, ì—­í•  ê´€ë¦¬',
        status:'pass',
        features:['ì‚¬ìš©ì ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜)','ê²€ìƒ‰/í•„í„° (ì—­í• /ìƒíƒœ)','ì‚¬ìš©ì ìƒì„¸ ë³´ê¸°','ì—­í•  ë³€ê²½','ì‚¬ìš©ì ë¹„í™œì„±í™”'],
        issues:[],
        history:[
          {date:'2026-02-27',type:'fix',text:'í˜ì´ì§€ë„¤ì´ì…˜ ì¶”ê°€ (PERF-001)',commit:'PERF-001'}
        ]
      },
      {
        id:'a-companies', name:'Company Management', nameKo:'íšŒì‚¬ ê´€ë¦¬', file:'admin.html',
        desc:'ë“±ë¡ íšŒì‚¬ ëª©ë¡, ì¸ì¦ ê´€ë¦¬',
        status:'pass',
        features:['íšŒì‚¬ ëª©ë¡','íšŒì‚¬ ìƒì„¸','ì¸ì¦ ìƒíƒœ ê´€ë¦¬','ê´€ë ¨ ì‚¬ìš©ì ë³´ê¸°'],
        issues:[],
        history:[]
      },
      {
        id:'a-orders', name:'Order Management', nameKo:'ì£¼ë¬¸ ê´€ë¦¬', file:'admin.html',
        desc:'ì „ì²´ ì£¼ë¬¸ ëª¨ë‹ˆí„°ë§, ìƒíƒœ ê´€ë¦¬',
        status:'pass',
        features:['ì£¼ë¬¸ ëª©ë¡','ì£¼ë¬¸ ìƒì„¸','ìƒíƒœ ë³€ê²½','í•„í„°/ê²€ìƒ‰'],
        issues:[],
        history:[]
      },
      {
        id:'a-service', name:'Service Requests', nameKo:'ì„œë¹„ìŠ¤ ìš”ì²­', file:'admin.html',
        desc:'ê³ ê° ì„œë¹„ìŠ¤ ìš”ì²­(ì§€ì› í‹°ì¼“) ì ‘ìˆ˜/ì²˜ë¦¬/ì™„ë£Œ',
        status:'pass',
        features:['ìš”ì²­ ëª©ë¡','ìƒíƒœ ê´€ë¦¬ (ì ‘ìˆ˜â†’ë°°ì •â†’ì²˜ë¦¬â†’ì™„ë£Œ)','ë‹´ë‹¹ì ë°°ì •','ìš°ì„ ìˆœìœ„ ì„¤ì •','ê´€ë¦¬ì ë©”ëª¨','ì²˜ë¦¬ ì‹œì‘ ì‹œê°„ ë³´ì¡´'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'24:00',type:'fix',text:'whistle.html: service_requests insertì—ì„œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” project_id ì»¬ëŸ¼ ì‚¬ìš© â†’ details jsonbë¡œ ì´ë™',commit:'audit-fix'},
          {date:'2026-02-28',time:'22:53',type:'fix',text:'started_at ë®ì–´ì“°ê¸° ë°©ì§€ â€” ê¸°ì¡´ SR ë ˆì½”ë“œ í™•ì¸',commit:'b8181dc'},
          {date:'2026-02-27',type:'fix',text:'ì„œë¹„ìŠ¤ ìš”ì²­ ì›Œí¬í”Œë¡œìš° ì „ì²´ êµ¬í˜„ (SVC-001)',commit:'SVC-001'}
        ]
      },
      {
        id:'a-marketplace', name:'Marketplace', nameKo:'ë§ˆì¼“í”Œë ˆì´ìŠ¤', file:'admin.html',
        desc:'ë§ˆì¼“í”Œë ˆì´ìŠ¤ ìš”ì²­/ì œì•ˆ ëª¨ë‹ˆí„°ë§',
        status:'pass',
        features:['ìš”ì²­ ëª©ë¡','ì œì•ˆ í˜„í™©','ë§¤ì¹­ ê´€ë¦¬'],
        issues:[],
        history:[]
      },
      {
        id:'a-chat', name:'Chat Monitor', nameKo:'ì±„íŒ… ëª¨ë‹ˆí„°', file:'admin.html',
        desc:'ì „ì²´ ì±„íŒ… ëª¨ë‹ˆí„°ë§, ë¯¸ì½ì€ ë©”ì‹œì§€ ì¶”ì ',
        status:'pass',
        features:['ëŒ€í™” ëª©ë¡','ë©”ì‹œì§€ ëª¨ë‹ˆí„°ë§','ë¯¸ì½ìŒ ì¹´ìš´íŠ¸','ë°”ì´ì–´ë³„ ëŒ€í™” ê·¸ë£¹'],
        issues:[],
        history:[]
      },
      {
        id:'a-analytics', name:'Analytics', nameKo:'ë¶„ì„/ë¦¬í¬íŠ¸', file:'admin.html',
        desc:'í”Œë«í¼ ë¶„ì„: ì‚¬ìš©ì ì¦ê°€, ê±°ë˜ ì¶”ì´, ì„œë¹„ìŠ¤ ì„±ê³¼',
        status:'pass',
        features:['ì‚¬ìš©ì ì¦ê°€ ì¶”ì´','ê±°ë˜ í˜„í™©','ì„œë¹„ìŠ¤ ìš”ì²­ í†µê³„','AI ë¶„ì„ ì‚¬ìš©ëŸ‰'],
        issues:[],
        history:[]
      }
    ]
  },

  // DATABASE
  database: {
    label: 'Database (Supabase)',
    icon: 'ğŸ—„ï¸',
    badge: 'admin',
    steps: [
      {
        id:'db-auth', name:'Auth & Users', nameKo:'ì¸ì¦/ì‚¬ìš©ì', file:'Supabase',
        desc:'auth.users (Supabase Auth) + public.users í…Œì´ë¸”',
        status:'pass',
        features:['Email/Password auth','User metadata (role, company)','Session management','Token refresh'],
        issues:[],
        history:[]
      },
      {
        id:'db-tables', name:'Core Tables', nameKo:'í•µì‹¬ í…Œì´ë¸”', file:'Supabase',
        desc:'companies, products, buyers, orders, documents, projects ë“± 31ê°œ í…Œì´ë¸”',
        status:'pass',
        features:['companies','products','buyers','orders','documents','projects','messages','notifications','marketplace_requests','marketplace_proposals','matchings','service_requests','subscriptions','analyses','email_logs','voucher_activities','alibaba_stores','alibaba_inquiries','saved_products','guide_articles'],
        issues:[
          {sev:'low',text:'ì¸ë±ìŠ¤ ìµœì í™” ì¶”ê°€ ì ê²€ ê¶Œì¥'},
          {sev:'low',text:'ì™¸ë˜í‚¤ ê´€ê³„ ì¶”ê°€ ì ê²€ ê¶Œì¥'}
        ],
        history:[
          {date:'2026-02-28',time:'24:00',type:'fix',text:'updated_at íŠ¸ë¦¬ê±° ì¶”ê°€: alibaba_inquiries, alibaba_stores, buyer_request_proposals, buyer_requests, escrow_transactions, meetings, orders, samples, shipments, subscriptions (10ê°œ í…Œì´ë¸”)',commit:'migration'},
          {date:'2026-02-28',time:'24:00',type:'fix',text:'orders.order_numberì— UNIQUE ì œì•½ì¡°ê±´ ì¶”ê°€',commit:'migration'},
          {date:'2026-02-28',time:'24:00',type:'fix',text:'status ì»¬ëŸ¼ NOT NULL ì œì•½ì¡°ê±´ ì¶”ê°€ (8ê°œ í…Œì´ë¸”: buyer_requests, buyer_request_proposals, escrow_transactions, meetings, orders, samples, shipments, subscriptions)',commit:'migration'}
        ]
      },
      {
        id:'db-edge', name:'Edge Functions', nameKo:'ì—£ì§€ í•¨ìˆ˜', file:'Supabase',
        desc:'ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜: ê²°ì œ, AI ë¶„ì„, ì´ë©”ì¼ ë“±',
        status:'pending',
        features:['toss-billing-issue','create-checkout-session','ê¸°íƒ€ Edge Functions'],
        issues:[
          {sev:'critical',text:'Edge Function ë™ì‘ ìƒíƒœ ì ê²€ í•„ìš”'}
        ],
        history:[]
      },
      {
        id:'db-rls', name:'RLS Policies', nameKo:'ë³´ì•ˆ ì •ì±…', file:'Supabase',
        desc:'Row Level Security ì •ì±…ìœ¼ë¡œ ë°ì´í„° ì ‘ê·¼ ì œì–´',
        status:'pass',
        features:['í…Œì´ë¸”ë³„ RLS í™œì„±í™”','SELECT/INSERT/UPDATE/DELETE ì •ì±…','ì„œë¹„ìŠ¤ ì—­í•  í‚¤ ê´€ë¦¬','RLS í—¬í¼ í•¨ìˆ˜ search_path ë³´ì•ˆ'],
        issues:[],
        history:[
          {date:'2026-02-28',time:'24:00',type:'security',text:'RLS í—¬í¼ í•¨ìˆ˜ì— explicit search_path ì„¤ì • (search_path ì¸ì ì…˜ ë°©ì§€)',commit:'migration'},
          {date:'2026-02-28',time:'24:00',type:'security',text:'handle_updated_at í•¨ìˆ˜ search_path ìˆ˜ì •',commit:'migration'}
        ]
      }
    ]
  },

  // CROSS-CUTTING CONCERNS
  crossCutting: [
    {id:'cc-security', name:'Security', status:'warn', issues:[
      {sev:'high',text:'ì´ë©”ì¼ ì¸ì¦(verification) ë¯¸ê°•ì œ â€” ë¯¸ì¸ì¦ ì´ë©”ì¼ë¡œ ê°€ì…/ë¡œê·¸ì¸ ê°€ëŠ¥'},
      {sev:'medium',text:'ê´€ë¦¬ì í¬í„¸ ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ì—†ìŒ'},
      {sev:'medium',text:'CAPTCHA ë¯¸ì ìš© (ë¡œê·¸ì¸/ê°€ì…)'},
      {sev:'low',text:'ì•Œë¦¼ XSS â€” ìˆ˜ì •ì™„ë£Œ (U.esc)'},
      {sev:'low',text:'ì±„íŒ… HTML ì´ìŠ¤ì¼€ì´í•‘ â€” ìˆ˜ì •ì™„ë£Œ'},
      {sev:'low',text:'PostgREST í•„í„° ì¸ì ì…˜ â€” ìˆ˜ì •ì™„ë£Œ (buyer.html)'},
      {sev:'low',text:'buyer-landing XSS (dangerouslySetInnerHTML) â€” ìˆ˜ì •ì™„ë£Œ'},
      {sev:'low',text:'ì±„íŒ… ìœ„ì ¯ esc() & bubble() ì´ìŠ¤ì¼€ì´í•‘ â€” ìˆ˜ì •ì™„ë£Œ (ì–‘ìª½ ëœë”©)'},
      {sev:'low',text:'RLS í—¬í¼ í•¨ìˆ˜ search_path ë³´ì•ˆ â€” ìˆ˜ì •ì™„ë£Œ'}
    ]},
    {id:'cc-payment', name:'Payment', status:'fail', issues:[
      {sev:'critical',text:'Toss Payments í‚¤ "REPLACE" í”Œë ˆì´ìŠ¤í™€ë” â€” ì…€ëŸ¬ ê²°ì œ ë¶ˆê°€'},
      {sev:'critical',text:'Stripe í‚¤ "REPLACE" í”Œë ˆì´ìŠ¤í™€ë” â€” ë°”ì´ì–´ ê²°ì œ ë¶ˆê°€'}
    ]},
    {id:'cc-relay', name:'Relay Server', status:'warn', issues:[
      {sev:'high',text:'Cloudflare í„°ë„ URL ìˆ˜ì‹œ ë§Œë£Œ â€” AI/ì´ë©”ì¼/ê²€ìƒ‰ ì¤‘ë‹¨ ìœ„í—˜'},
      {sev:'medium',text:'ì˜êµ¬ í˜¸ìŠ¤íŒ… ì´ì „ ê¶Œì¥ (Railway/Render)'}
    ]},
    {id:'cc-i18n', name:'Internationalization', status:'warn', issues:[
      {sev:'medium',text:'ë°”ì´ì–´ í¬í„¸ ì˜ì–´ ë²ˆì—­ ì¼ë¶€ ë¶ˆì™„ì „'},
      {sev:'low',text:'ì¼ë³¸ì–´/ì¤‘êµ­ì–´ ë¯¸ì§€ì›'}
    ]},
    {id:'cc-mobile', name:'Mobile Responsive', status:'pass', issues:[
      {sev:'low',text:'ì¼ë¶€ í…Œì´ë¸” ëª¨ë°”ì¼ì—ì„œ ê°€ë¡œ ìŠ¤í¬ë¡¤ í•„ìš”'}
    ]},
    {id:'cc-performance', name:'Performance', status:'warn', issues:[
      {sev:'high',text:'Babel Standalone í”„ë¡œë•ì…˜ ì‚¬ìš© (~800KB) â€” ëœë”© í˜ì´ì§€ ë¡œë”© ì„±ëŠ¥ ì €í•˜'},
      {sev:'high',text:'Admin 200ê±´ í•˜ë“œ ë¦¬ë°‹ â€” ë¶€ë¶„ í˜ì´ì§€ë„¤ì´ì…˜ë§Œ ì¡´ì¬'},
      {sev:'low',text:'whistle.html 533KB ë‹¨ì¼ íŒŒì¼ â€” ì½”ë“œ ë¶„í•  ê¶Œì¥'}
    ]},
    {id:'cc-database', name:'Database Integrity', status:'pass', issues:[
      {sev:'low',text:'updated_at íŠ¸ë¦¬ê±° 10ê°œ í…Œì´ë¸” ì¶”ê°€ â€” ìˆ˜ì •ì™„ë£Œ'},
      {sev:'low',text:'orders.order_number UNIQUE ì œì•½ â€” ìˆ˜ì •ì™„ë£Œ'},
      {sev:'low',text:'status NOT NULL ì œì•½ 8ê°œ í…Œì´ë¸” â€” ìˆ˜ì •ì™„ë£Œ'},
      {sev:'low',text:'RLS í•¨ìˆ˜ search_path ë³´ì•ˆ â€” ìˆ˜ì •ì™„ë£Œ'}
    ]}
  ],

  // CHANGELOG
  changelog: [
    {
      date:'2026-02-28',
      entries:[
        {time:'24:00',type:'security',title:'DB ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜ ê°ì‚¬ ìˆ˜ì • (whistle-landing.html)',desc:'companies insertì—ì„œ ì˜ëª»ëœ ì»¬ëŸ¼ëª… ì‚¬ìš©: nameâ†’name_ko, contact_nameâ†’ceo_name_ko, product_categoriesâ†’category. ê°€ì… ì‹œ DB ì˜¤ë¥˜ ìœ ë°œí•˜ë˜ ë¬¸ì œ í•´ê²°',files:['whistle-landing.html'],commit:'audit-fix'},
        {time:'24:00',type:'security',title:'DB ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜ ê°ì‚¬ ìˆ˜ì • (whistle.html - documents)',desc:'documents insertì—ì„œ dataâ†’content ì»¬ëŸ¼ ìˆ˜ì •, buyer_nameâ†’buyer_idë¡œ ë³€ê²½. documents read ì½”ë“œì—ì„œ doc.data ëŒ€ì‹  doc.content ìš°ì„  ì°¸ì¡°',files:['whistle.html'],commit:'audit-fix'},
        {time:'24:00',type:'fix',title:'ì˜¨ë³´ë”© ì»¬ëŸ¼ëª… ìˆ˜ì • (whistle.html)',desc:'ì˜¨ë³´ë”© íšŒì‚¬ì •ë³´ ì €ì¥ ì‹œ ceo_name â†’ ceo_name_ko ì»¬ëŸ¼ëª… ìˆ˜ì •',files:['whistle.html'],commit:'audit-fix'},
        {time:'24:00',type:'fix',title:'service_requests project_id ì»¬ëŸ¼ ìˆ˜ì • (whistle.html)',desc:'ì¡´ì¬í•˜ì§€ ì•ŠëŠ” project_id ì»¬ëŸ¼ ì‚¬ìš© â†’ details jsonb í•„ë“œë¡œ ì´ë™',files:['whistle.html'],commit:'audit-fix'},
        {time:'24:00',type:'security',title:'PostgREST í•„í„° ì¸ì ì…˜ ìˆ˜ì • (buyer.html)',desc:'ê²€ìƒ‰ ì¿¼ë¦¬ê°€ sanitize ì—†ì´ PostgREST í•„í„°ì— ì§ì ‘ ì „ë‹¬ë˜ë˜ ë³´ì•ˆ ì·¨ì•½ì  ìˆ˜ì •',files:['buyer.html'],commit:'audit-fix'},
        {time:'24:00',type:'security',title:'XSS ì·¨ì•½ì  ìˆ˜ì • (buyer-landing.html)',desc:'Naver ìƒí’ˆ ì œëª©ì„ dangerouslySetInnerHTMLë¡œ ë¯¸ì´ìŠ¤ì¼€ì´í”„ ë Œë”ë§í•˜ë˜ XSS ì·¨ì•½ì  ìˆ˜ì •',files:['buyer-landing.html'],commit:'audit-fix'},
        {time:'24:00',type:'security',title:'ì±„íŒ… ìœ„ì ¯ ì´ìŠ¤ì¼€ì´í•‘ ë³´ì™„ (ì–‘ìª½ ëœë”©)',desc:'esc() í•¨ìˆ˜ì— & ë° > ì´ìŠ¤ì¼€ì´í•‘ ëˆ„ë½ ìˆ˜ì •, bubble() í•¨ìˆ˜ í…ìŠ¤íŠ¸ ì´ìŠ¤ì¼€ì´í•‘ ì¶”ê°€',files:['whistle-landing.html','buyer-landing.html'],commit:'audit-fix'},
        {time:'24:00',type:'fix',title:'DB ë§ˆì´ê·¸ë ˆì´ì…˜: updated_at íŠ¸ë¦¬ê±° (10ê°œ í…Œì´ë¸”)',desc:'alibaba_inquiries, alibaba_stores, buyer_request_proposals, buyer_requests, escrow_transactions, meetings, orders, samples, shipments, subscriptionsì— updated_at ìë™ ê°±ì‹  íŠ¸ë¦¬ê±° ì¶”ê°€',files:['Supabase'],commit:'migration'},
        {time:'24:00',type:'fix',title:'DB ë§ˆì´ê·¸ë ˆì´ì…˜: UNIQUE/NOT NULL ì œì•½ì¡°ê±´',desc:'orders.order_number UNIQUE ì¶”ê°€. status ì»¬ëŸ¼ NOT NULL ì¶”ê°€ (8ê°œ í…Œì´ë¸”: buyer_requests, buyer_request_proposals, escrow_transactions, meetings, orders, samples, shipments, subscriptions)',files:['Supabase'],commit:'migration'},
        {time:'24:00',type:'security',title:'DB ë§ˆì´ê·¸ë ˆì´ì…˜: RLS í•¨ìˆ˜ search_path ë³´ì•ˆ',desc:'RLS í—¬í¼ í•¨ìˆ˜ì— explicit search_path ì„¤ì • (search_path ì¸ì ì…˜ ë°©ì§€). handle_updated_at í•¨ìˆ˜ search_path ìˆ˜ì •',files:['Supabase'],commit:'migration'},
        {time:'23:30',type:'fix',title:'convertPItoOrder ë°ì´í„° ê²½ë¡œ ìˆ˜ì •',desc:'genDoc()ì´ c.ref.doc_no/payment/termsì— ì €ì¥í•˜ì§€ë§Œ convertPItoOrderëŠ” c.doc_number/payment_terms/incotermsë¥¼ ì°¸ì¡° â€” c.ref.* ìš°ì„  ì°¸ì¡°ë¡œ ìˆ˜ì •',files:['whistle.html'],commit:'b8181dc'},
        {time:'23:30',type:'fix',title:'SR started_at ë®ì–´ì“°ê¸° ë°©ì§€',desc:'updateSR()ê°€ ë§¤ë²ˆ started_atì„ í˜„ì¬ì‹œê°„ìœ¼ë¡œ ë®ì–´ì”€ â€” ê¸°ì¡´ SR ë ˆì½”ë“œì˜ started_at í™•ì¸ í›„ ì„¤ì •',files:['admin.html'],commit:'b8181dc'},
        {time:'22:49',type:'fix',title:'ì—£ì§€ì¼€ì´ìŠ¤: ë¦´ë ˆì´ íƒ€ì´ë°, ì´ì¤‘ì œì¶œ, ëª¨ë‹¬ ë¦­, ì±„íŒ… ì´ìŠ¤ì¼€ì´í•‘',desc:'loadExchangeRate _relayReady ë˜í•‘, ë°”ì´ì–´ ë¬¸ì˜ ì´ì¤‘ì œì¶œ ê°€ë“œ, ëª¨ë‹¬ DOM ëˆ„ìˆ˜ ìˆ˜ì •, í”Œë¡œíŒ… ì±„íŒ… & ì´ìŠ¤ì¼€ì´í•‘',files:['whistle.html','buyer.html'],commit:'9831e85'},
        {time:'22:49',type:'ux',title:'UX ì¹´í”¼ í´ë¦¬ì‹œ',desc:'í”Œëœ ë‹¤ìš´ê·¸ë ˆì´ë“œ í™•ì¸ ê°œì„ , ì•Œë¦¬ë°”ë°” í”„ë¡œì íŠ¸ ìƒì„± ì•ˆë‚´, ë¹ˆ í™œë™ íƒ€ì„ë¼ì¸ CTA, ë¹„ë°€ë²ˆí˜¸ ì—ëŸ¬ ì™„ì„±, ë°”ìš°ì²˜ í‹¸ë“œ ì œê±°',files:['whistle.html','buyer-landing.html','admin.html'],commit:'a6c4a2e'},
        {time:'22:48',type:'security',title:'ë³´ì•ˆ & ì•ˆì •ì„±: XSS, ì¸ì¦ ìƒíƒœ, ì„¸ì…˜ ì²˜ë¦¬',desc:'ì•Œë¦¼ XSS ë°©ì§€, onAuthStateChange ì¶”ê°€(whistle+admin), fetchRetry ìˆ˜ì •, Realtime ì •ë¦¬, íŒŒì¼ ìœ í˜• ê²€ì¦, ì—­í•  ì˜¤ì—¼ ë°©ì§€, ì‚­ì œ í™•ì¸ ê°œì„ ',files:['whistle.html','buyer.html','admin.html'],commit:'d022591'},
        {time:'17:05',type:'feat',title:'UX í˜ë¥´ì†Œë‚˜ ì‹œë®¬ë ˆì´ì…˜: i18n, ì ‘ê·¼ì„±, ëª¨ë°”ì¼',desc:'ì…€ëŸ¬ ê°€ì… users row ìƒì„±, ë¬´ë£Œ ë¶„ì„ 3íšŒ í†µì¼, FREE_SEARCH_LIMIT=3, ë””ë²„ê·¸ ë©”ì‹œì§€ ì œê±°, ì–´ë“œë¯¼ ë¡œê·¸ì¸ ê°€ë“œ',files:['whistle-landing.html','buyer-landing.html','admin.html'],commit:'6e05175'}
      ]
    },
    {
      date:'2026-02-27',
      entries:[
        {time:'',type:'feat',title:'ê°€ì´ë“œì„¼í„°, í”Œë¡œíŒ… ì±„íŒ…, ì œíœ´ë¬¸ì˜, ì±„íŒ… ìˆ˜ì •',desc:'ìˆ˜ì¶œê°€ì´ë“œ/ì‚°ì—…ë³„/êµ­ê°€ë³„ ê°€ì´ë“œ/ìš©ì–´ì‚¬ì „/ë°•ëŒíšŒ ë„ì…, ì „ í˜ì´ì§€ í”Œë¡œíŒ… ì‹¤ì‹œê°„ ìƒë‹´, ì œíœ´ë¬¸ì˜ í¼, ì…€ëŸ¬-ë°”ì´ì–´ ì±„íŒ… ì—°ë™ ìˆ˜ì •',files:['whistle.html','buyer.html','whistle-landing.html','buyer-landing.html','admin.html'],commit:'0357cb2'},
        {time:'',type:'fix',title:'ì¢…í•© QA í˜ë¥´ì†Œë‚˜ ê¸°ë°˜ ìˆ˜ì •',desc:'Phase 1-2 ì „ì²´ í•­ëª©: AUTH, BUYER, DOC, EMAIL, RELAY, CHAT, PERF, SVC, MARKETPLACE, EXPORT, ALI, MOBILE',files:['all'],commit:'4daece4'}
      ]
    }
  ]
};

// =====================================================
// RENDER FUNCTIONS
// =====================================================
var currentView = 'overview';

function switchView(view, btn) {
  currentView = view;
  document.querySelectorAll('.tab-btn').forEach(function(b){b.classList.remove('active')});
  if(btn) btn.classList.add('active');
  document.getElementById('viewTitle').textContent = {
    overview:'Overview',seller:'Seller Journey',buyer:'Buyer Journey',
    admin:'Admin Journey',database:'Database',changelog:'Changelog'
  }[view] || view;
  renderContent();
}

function renderContent() {
  var el = document.getElementById('content');
  switch(currentView) {
    case 'overview': el.innerHTML = renderOverview(); break;
    case 'seller': el.innerHTML = renderJourney(DATA.seller); break;
    case 'buyer': el.innerHTML = renderJourney(DATA.buyer); break;
    case 'admin': el.innerHTML = renderJourney(DATA.admin); break;
    case 'database': el.innerHTML = renderJourney(DATA.database); break;
    case 'changelog': el.innerHTML = renderChangelog(); break;
  }
}

function renderOverview() {
  var allSteps = getAllSteps();
  var total = allSteps.length;
  var pass = allSteps.filter(function(s){return s.status==='pass'}).length;
  var fail = allSteps.filter(function(s){return s.status==='fail'}).length;
  var warn = allSteps.filter(function(s){return s.status==='warn'}).length;
  var pending = allSteps.filter(function(s){return s.status==='pending'}).length;
  var allIssues = [];
  allSteps.forEach(function(s){s.issues.forEach(function(i){allIssues.push({step:s.name,issue:i})})});
  DATA.crossCutting.forEach(function(c){c.issues.forEach(function(i){allIssues.push({step:c.name,issue:i})})});
  var critical = allIssues.filter(function(i){return i.issue.sev==='critical'}).length;
  var high = allIssues.filter(function(i){return i.issue.sev==='high'}).length;
  var medium = allIssues.filter(function(i){return i.issue.sev==='medium'}).length;
  var low = allIssues.filter(function(i){return i.issue.sev==='low'}).length;
  var totalChanges = 0;
  DATA.changelog.forEach(function(d){totalChanges+=d.entries.length});

  var h = '<div class="stats-view">';
  h += '<h2 style="font-size:24px;font-weight:800;margin-bottom:8px">Whistle AI Platform QA Overview</h2>';
  h += '<p style="color:var(--text2);margin-bottom:32px">ì „ì²´ ì„œë¹„ìŠ¤ ìƒíƒœ ìš”ì•½ â€” '+new Date().toLocaleDateString('ko-KR')+'</p>';

  // Stats grid
  h += '<div class="stats-grid">';
  h += '<div class="stat-card"><div class="label">Total Features</div><div class="value">'+total+'</div><div class="sub">ì „ì²´ ê¸°ëŠ¥ ì˜ì—­</div></div>';
  h += '<div class="stat-card"><div class="label">Passed</div><div class="value green">'+pass+'</div><div class="sub">'+(total?Math.round(pass/total*100):0)+'% í†µê³¼</div></div>';
  h += '<div class="stat-card"><div class="label">Warnings</div><div class="value yellow">'+warn+'</div><div class="sub">ì£¼ì˜ í•„ìš”</div></div>';
  h += '<div class="stat-card"><div class="label">Failed</div><div class="value red">'+fail+'</div><div class="sub">ìˆ˜ì • í•„ìš”</div></div>';
  h += '<div class="stat-card"><div class="label">Pending Audit</div><div class="value blue">'+pending+'</div><div class="sub">ì ê²€ ëŒ€ê¸°</div></div>';
  h += '<div class="stat-card"><div class="label">Total Changes</div><div class="value">'+totalChanges+'</div><div class="sub">ìˆ˜ì • ì´ë ¥</div></div>';
  h += '</div>';

  // Issue summary
  h += '<h3 style="font-size:16px;font-weight:700;margin:32px 0 16px">Issue Summary</h3>';
  h += '<div class="stats-grid" style="grid-template-columns:repeat(4,1fr)">';
  h += '<div class="stat-card" style="border-left:3px solid var(--red)"><div class="label">Critical</div><div class="value red">'+critical+'</div></div>';
  h += '<div class="stat-card" style="border-left:3px solid var(--orange)"><div class="label">High</div><div class="value" style="color:var(--orange)">'+high+'</div></div>';
  h += '<div class="stat-card" style="border-left:3px solid var(--yellow)"><div class="label">Medium</div><div class="value yellow">'+medium+'</div></div>';
  h += '<div class="stat-card" style="border-left:3px solid var(--text3)"><div class="label">Low</div><div class="value" style="color:var(--text3)">'+low+'</div></div>';
  h += '</div>';

  // Critical/High issues table
  var critHigh = allIssues.filter(function(i){return i.issue.sev==='critical'||i.issue.sev==='high'});
  if(critHigh.length) {
    h += '<h3 style="font-size:16px;font-weight:700;margin:32px 0 16px">Critical & High Issues ('+critHigh.length+')</h3>';
    h += '<table class="summary-table"><thead><tr><th>Severity</th><th>Area</th><th>Issue</th></tr></thead><tbody>';
    critHigh.forEach(function(i){
      h += '<tr><td><span class="sev '+i.issue.sev+'">'+i.issue.sev.toUpperCase()+'</span></td>';
      h += '<td>'+esc(i.step)+'</td><td>'+esc(i.issue.text)+'</td></tr>';
    });
    h += '</tbody></table>';
  }

  // Cross-cutting concerns
  h += '<h3 style="font-size:16px;font-weight:700;margin:32px 0 16px">Cross-Cutting Concerns</h3>';
  h += '<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px">';
  DATA.crossCutting.forEach(function(c){
    h += '<div class="feature-card status-'+c.status+'">';
    h += '<div class="card-header"><h3>'+esc(c.name)+'</h3><span class="status-badge '+c.status+'">'+statusLabel(c.status)+'</span></div>';
    if(c.issues.length) {
      h += '<div class="card-issues">';
      c.issues.forEach(function(i){
        h += '<div class="issue-item"><span class="sev '+i.sev+'">'+i.sev.toUpperCase().charAt(0)+'</span><span>'+esc(i.text)+'</span></div>';
      });
      h += '</div>';
    }
    h += '</div>';
  });
  h += '</div>';

  // Files table
  h += '<h3 style="font-size:16px;font-weight:700;margin:32px 0 16px">Project Files</h3>';
  h += '<table class="summary-table"><thead><tr><th>File</th><th>Size</th><th>Role</th></tr></thead><tbody>';
  DATA.meta.files.forEach(function(f){
    h += '<tr><td style="font-family:monospace;font-size:11px">'+esc(f.name)+'</td><td>'+f.size+'</td><td>'+esc(f.role)+'</td></tr>';
  });
  h += '</tbody></table>';
  h += '</div>';
  return h;
}

function renderJourney(journey) {
  var h = '<div class="journey-view">';
  h += '<div class="journey-title"><h2>'+journey.icon+' '+esc(journey.label)+'</h2>';
  var passCount = journey.steps.filter(function(s){return s.status==='pass'}).length;
  h += '<span class="badge '+journey.badge+'">'+passCount+'/'+journey.steps.length+' Passed</span></div>';

  h += '<div class="journey-flow">';
  journey.steps.forEach(function(step, idx) {
    h += '<div class="journey-step">';
    h += renderFeatureCard(step, idx+1);
    if(idx < journey.steps.length-1) h += '<div class="arrow">&#8594;</div>';
    h += '</div>';
  });
  h += '</div></div>';
  return h;
}

function renderFeatureCard(step, num) {
  var h = '<div class="feature-card status-'+step.status+'" onclick="showDetail(\''+step.id+'\')" id="card-'+step.id+'">';
  h += '<div class="card-header"><h3>'+esc(step.name)+'</h3><span class="step-num">Step '+num+'</span></div>';
  h += '<div style="font-size:11px;color:var(--text3);margin-bottom:6px">'+esc(step.nameKo)+' &middot; '+esc(step.file)+'</div>';
  h += '<div class="card-status"><span class="status-badge '+step.status+'">'+statusLabel(step.status)+'</span>';
  if(step.issues.length) h += '<span style="font-size:11px;color:var(--red)">'+step.issues.length+' issues</span>';
  if(step.history.length) h += '<span style="font-size:11px;color:var(--blue)">'+step.history.length+' changes</span>';
  h += '</div>';
  h += '<div class="card-desc">'+esc(step.desc)+'</div>';

  // Features list (collapsed)
  h += '<div style="margin-bottom:8px"><div style="font-size:11px;font-weight:600;color:var(--text3);margin-bottom:4px">Features ('+step.features.length+')</div>';
  h += '<div style="display:flex;flex-wrap:wrap;gap:4px">';
  step.features.slice(0,6).forEach(function(f){
    h += '<span style="font-size:10px;padding:2px 8px;background:var(--surface2);border-radius:4px;color:var(--text2)">'+esc(f)+'</span>';
  });
  if(step.features.length > 6) h += '<span style="font-size:10px;padding:2px 8px;color:var(--text3)">+'+(step.features.length-6)+' more</span>';
  h += '</div></div>';

  // Issues
  if(step.issues.length) {
    h += '<div class="card-issues">';
    step.issues.forEach(function(i){
      h += '<div class="issue-item"><span class="sev '+i.sev+'">'+i.sev.toUpperCase().charAt(0)+'</span><span>'+esc(i.text)+'</span></div>';
    });
    h += '</div>';
  }

  // Recent history
  if(step.history.length) {
    h += '<div class="card-meta">';
    var last = step.history[0];
    h += '<span>Last: '+last.date+(last.time?' '+last.time:'')+'</span>';
    h += '<span class="changelog-tag '+last.type+'">'+last.type+'</span>';
    h += '</div>';
  }
  h += '</div>';
  return h;
}

function renderChangelog() {
  var h = '<div class="changelog-view">';
  h += '<h2 style="font-size:24px;font-weight:800;margin-bottom:8px">Change History</h2>';
  h += '<p style="color:var(--text2);margin-bottom:32px">ëª¨ë“  ìˆ˜ì • ì´ë ¥ â€” ë‚ ì§œ/ì‹œê°„ë³„ ê¸°ë¡</p>';

  DATA.changelog.forEach(function(day) {
    h += '<div class="changelog-day">';
    h += '<div class="changelog-date"><span>'+day.date+'</span><span class="count">'+day.entries.length+' changes</span></div>';
    day.entries.forEach(function(e) {
      h += '<div class="changelog-entry">';
      h += '<div class="changelog-time">'+(e.time||'â€”')+'</div>';
      h += '<div class="changelog-content">';
      h += '<h4>'+esc(e.title)+'</h4>';
      h += '<p>'+esc(e.desc)+'</p>';
      h += '<div class="changelog-tags">';
      h += '<span class="changelog-tag '+e.type+'">'+e.type+'</span>';
      if(e.commit) h += '<span class="changelog-tag" style="background:var(--surface3);color:var(--text3)">'+esc(e.commit)+'</span>';
      h += '</div>';
      if(e.files) h += '<div class="changelog-file">'+e.files.join(', ')+'</div>';
      h += '</div></div>';
    });
    h += '</div>';
  });
  h += '</div>';
  return h;
}

// =====================================================
// DETAIL MODAL
// =====================================================
function showDetail(id) {
  var step = findStep(id);
  if(!step) return;
  var m = document.getElementById('modalContent');
  var h = '<div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px">';
  h += '<div><h2>'+esc(step.name)+'</h2><p style="color:var(--text2);font-size:13px;margin-top:4px">'+esc(step.nameKo)+' &middot; '+esc(step.file)+'</p></div>';
  h += '<button onclick="closeModal()" style="background:none;border:none;color:var(--text3);cursor:pointer;font-size:24px;padding:4px">&times;</button>';
  h += '</div>';

  h += '<div class="card-status" style="margin-bottom:16px"><span class="status-badge '+step.status+'" style="font-size:13px;padding:4px 14px">'+statusLabel(step.status)+'</span></div>';
  h += '<p style="color:var(--text2);line-height:1.7;margin-bottom:24px">'+esc(step.desc)+'</p>';

  // All features
  h += '<h3 style="font-size:14px;font-weight:700;margin-bottom:12px">Features ('+step.features.length+')</h3>';
  h += '<div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:24px">';
  step.features.forEach(function(f){
    h += '<span style="font-size:12px;padding:4px 12px;background:var(--surface2);border:1px solid var(--border);border-radius:6px">'+esc(f)+'</span>';
  });
  h += '</div>';

  // All issues
  if(step.issues.length) {
    h += '<h3 style="font-size:14px;font-weight:700;margin-bottom:12px;color:var(--red)">Issues ('+step.issues.length+')</h3>';
    step.issues.forEach(function(i){
      h += '<div style="display:flex;align-items:flex-start;gap:10px;padding:12px;margin-bottom:8px;background:var(--surface2);border-radius:var(--radius-sm);border-left:3px solid '+(i.sev==='critical'?'var(--red)':i.sev==='high'?'var(--orange)':i.sev==='medium'?'var(--yellow)':'var(--text3)')+'">';
      h += '<span class="sev '+i.sev+'" style="flex-shrink:0">'+i.sev.toUpperCase()+'</span>';
      h += '<span style="font-size:13px;line-height:1.5">'+esc(i.text)+'</span></div>';
    });
  }

  // Full history
  if(step.history.length) {
    h += '<h3 style="font-size:14px;font-weight:700;margin:24px 0 12px">Change History ('+step.history.length+')</h3>';
    step.history.forEach(function(ch){
      h += '<div class="changelog-entry" style="margin-bottom:8px">';
      h += '<div class="changelog-time">'+ch.date+'<br>'+(ch.time||'')+'</div>';
      h += '<div class="changelog-content"><p style="font-size:13px">'+esc(ch.text)+'</p>';
      h += '<div class="changelog-tags" style="margin-top:6px">';
      h += '<span class="changelog-tag '+ch.type+'">'+ch.type+'</span>';
      if(ch.commit) h += '<span class="changelog-tag" style="background:var(--surface3);color:var(--text3)">'+esc(ch.commit)+'</span>';
      h += '</div></div></div>';
    });
  }

  m.innerHTML = h;
  document.getElementById('modalOverlay').classList.add('active');
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('active');
}

// =====================================================
// SIDEBAR NAV
// =====================================================
function renderSidebar() {
  var nav = document.getElementById('sidebarNav');
  var sections = [
    {key:'overview',label:'Overview',icon:'ğŸ“Š',steps:[]},
    {key:'seller',label:DATA.seller.label,icon:DATA.seller.icon,steps:DATA.seller.steps},
    {key:'buyer',label:DATA.buyer.label,icon:DATA.buyer.icon,steps:DATA.buyer.steps},
    {key:'admin',label:DATA.admin.label,icon:DATA.admin.icon,steps:DATA.admin.steps},
    {key:'database',label:DATA.database.label,icon:DATA.database.icon,steps:DATA.database.steps},
    {key:'changelog',label:'Changelog',icon:'ğŸ“',steps:[]}
  ];
  var h = '';
  sections.forEach(function(sec){
    var issueCount = sec.steps.reduce(function(a,s){return a+s.issues.length},0);
    h += '<div class="nav-group'+(sec.key===currentView?' open':'')+'" data-section="'+sec.key+'">';
    h += '<div class="nav-group-header" onclick="toggleNavGroup(this.parentElement)">';
    h += '<span class="icon">'+sec.icon+'</span>';
    h += '<span>'+esc(sec.label.split('(')[0].trim())+'</span>';
    if(issueCount) h += '<span class="count has-issues">'+issueCount+'</span>';
    else if(sec.steps.length) h += '<span class="count">'+sec.steps.length+'</span>';
    h += '<span class="arrow">&#9654;</span></div>';
    if(sec.steps.length) {
      h += '<div class="nav-group-items">';
      sec.steps.forEach(function(step){
        h += '<div class="nav-item" onclick="navTo(\''+sec.key+'\',\''+step.id+'\')" data-search="'+esc(step.name+' '+step.nameKo+' '+step.desc).toLowerCase()+'">';
        h += '<span class="dot '+step.status+'"></span>';
        h += '<span>'+esc(step.name)+'</span>';
        if(step.issues.length) h += '<span style="margin-left:auto;font-size:10px;color:var(--red)">'+step.issues.length+'</span>';
        h += '</div>';
      });
      h += '</div>';
    } else {
      h += '<div class="nav-group-items"><div class="nav-item" onclick="switchView(\''+sec.key+'\',document.querySelector(\'[data-view='+sec.key+']\'))"><span class="dot pass"></span><span>View</span></div></div>';
    }
    h += '</div>';
  });
  nav.innerHTML = h;
}

function toggleNavGroup(el) {
  el.classList.toggle('open');
}

function navTo(section, stepId) {
  switchView(section, document.querySelector('[data-view='+section+']'));
  setTimeout(function(){
    var card = document.getElementById('card-'+stepId);
    if(card) card.scrollIntoView({behavior:'smooth',block:'center'});
  },100);
}

function filterNav(q) {
  q = q.toLowerCase();
  document.querySelectorAll('.nav-item').forEach(function(el){
    var match = !q || (el.dataset.search||'').includes(q);
    el.style.display = match ? '' : 'none';
  });
  if(q) document.querySelectorAll('.nav-group').forEach(function(g){g.classList.add('open')});
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('collapsed');
}

function expandAll() {
  document.querySelectorAll('.nav-group').forEach(function(g){g.classList.add('open')});
}
function collapseAll() {
  document.querySelectorAll('.nav-group').forEach(function(g){g.classList.remove('open')});
}

// =====================================================
// HELPERS
// =====================================================
function getAllSteps() {
  return [].concat(DATA.seller.steps, DATA.buyer.steps, DATA.admin.steps, DATA.database.steps);
}

function findStep(id) {
  return getAllSteps().find(function(s){return s.id===id});
}

function statusLabel(s) {
  return {pass:'PASS',fail:'FAIL',warn:'WARNING',fixed:'FIXED',pending:'PENDING'}[s]||s;
}

function esc(s) {
  if(!s) return '';
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// =====================================================
// INIT
// =====================================================
document.getElementById('lastUpdated').textContent = new Date().toLocaleString('ko-KR');
renderSidebar();
renderContent();

// Keyboard shortcuts
document.addEventListener('keydown', function(e) {
  if(e.key === 'Escape') closeModal();
  if(e.key === '/' && !e.ctrlKey && document.activeElement.tagName !== 'INPUT') {
    e.preventDefault();
    document.getElementById('searchInput').focus();
  }
});
</script>
</body>
</html>
